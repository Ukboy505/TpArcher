const _0x3862a6=_0x4b8c;(function(_0x2059a1,_0x371e89){const _0xc8f3cd=_0x4b8c,_0x157e4b=_0x2059a1();while(!![]){try{const _0x1fb1c3=-parseInt(_0xc8f3cd(0x19e))/0x1*(-parseInt(_0xc8f3cd(0x1d1))/0x2)+-parseInt(_0xc8f3cd(0x1bb))/0x3+parseInt(_0xc8f3cd(0x1a4))/0x4*(-parseInt(_0xc8f3cd(0x1a6))/0x5)+parseInt(_0xc8f3cd(0x1ac))/0x6*(-parseInt(_0xc8f3cd(0x1d3))/0x7)+-parseInt(_0xc8f3cd(0x1a0))/0x8+-parseInt(_0xc8f3cd(0x1ce))/0x9*(-parseInt(_0xc8f3cd(0x1b1))/0xa)+parseInt(_0xc8f3cd(0x1d5))/0xb;if(_0x1fb1c3===_0x371e89)break;else _0x157e4b['push'](_0x157e4b['shift']());}catch(_0x538007){_0x157e4b['push'](_0x157e4b['shift']());}}}(_0x296a,0x326c3));const _0x578d56=(function(){let _0x3ad2a6=!![];return function(_0x35097e,_0x5838c5){const _0x270cdc=_0x3ad2a6?function(){const _0x590ad7=_0x4b8c;if(_0x5838c5){const _0x5e8f79=_0x5838c5[_0x590ad7(0x19f)](_0x35097e,arguments);return _0x5838c5=null,_0x5e8f79;}}:function(){};return _0x3ad2a6=![],_0x270cdc;};}()),_0x1503ac=_0x578d56(this,function(){const _0xf9603a=_0x4b8c,_0x14793b=function(){const _0x52eeb4=_0x4b8c;let _0x140d60;try{_0x140d60=Function(_0x52eeb4(0x1d6)+_0x52eeb4(0x1a7)+');')();}catch(_0x2c33e7){_0x140d60=window;}return _0x140d60;},_0x5f1a72=_0x14793b(),_0x2f0985=_0x5f1a72[_0xf9603a(0x1c1)]=_0x5f1a72[_0xf9603a(0x1c1)]||{},_0x43d986=[_0xf9603a(0x196),_0xf9603a(0x1b0),_0xf9603a(0x1b9),'error',_0xf9603a(0x1b3),_0xf9603a(0x1ab),'trace'];for(let _0x3a6199=0x0;_0x3a6199<_0x43d986[_0xf9603a(0x1c9)];_0x3a6199++){const _0x1e9c44=_0x578d56[_0xf9603a(0x1d4)][_0xf9603a(0x1c3)][_0xf9603a(0x1aa)](_0x578d56),_0x15f3ae=_0x43d986[_0x3a6199],_0xb7700c=_0x2f0985[_0x15f3ae]||_0x1e9c44;_0x1e9c44[_0xf9603a(0x1af)]=_0x578d56['bind'](_0x578d56),_0x1e9c44[_0xf9603a(0x1bd)]=_0xb7700c[_0xf9603a(0x1bd)]['bind'](_0xb7700c),_0x2f0985[_0x15f3ae]=_0x1e9c44;}});_0x1503ac();import{newSymbol,symbol,popularSymbols,symbolsCache,granularity,baseToken,quoteToken,baseVolumeTable,quoteVolumeTable,globalCandles,higherTimeframeCandles,tradeSize,candlesData,latestCandle,ticker}from'../data.js';import{corsProxy}from'./proxy.js';const BASE_URL='https://api.binance.com';export const timeframes={'1s':'1s','1m':'1m','3m':'3m','5m':'5m','15m':_0x3862a6(0x1cf),'30m':_0x3862a6(0x1a5),'1h':'1h','2h':'2h','4h':'4h','6h':'6h','8h':'8h','12h':_0x3862a6(0x1c8),'1d':'1d','3d':'3d','1w':'1w','1M':'1M'};function _0x4b8c(_0x15a5cc,_0x180774){const _0x1b9c1e=_0x296a();return _0x4b8c=function(_0x1503ac,_0x578d56){_0x1503ac=_0x1503ac-0x196;let _0x5eac6c=_0x1b9c1e[_0x1503ac];return _0x5eac6c;},_0x4b8c(_0x15a5cc,_0x180774);}export const granularityMap={'1s':0x3e8,'1m':0xea60,'3m':0x2bf20,'5m':0x493e0,'15m':0xdbba0,'30m':0x1b7740,'1h':0x36ee80,'2h':0x6ddd00,'4h':0xdbba00,'6h':0x1499700,'8h':0x1b77400,'12h':0x2932e00,'1d':0x5265c00,'3d':0xf731400,'1w':0x240c8400,'1M':0x9a7ec800};export function granularityToSeconds(_0x7ed718){const _0x132766=0x1,_0x47ed5f=0x3c,_0x2e2d91=0xe10,_0x16517c=0x15180,_0x50377f=0x93a80,_0x4f8cf2=0x278d00,_0x5b58b1={'1s':_0x132766,'1m':_0x47ed5f,'3m':0x3*_0x47ed5f,'5m':0x5*_0x47ed5f,'15m':0xf*_0x47ed5f,'30m':0x1e*_0x47ed5f,'1h':_0x2e2d91,'2h':0x2*_0x2e2d91,'4h':0x4*_0x2e2d91,'6h':0x6*_0x2e2d91,'8h':0x8*_0x2e2d91,'12h':0xc*_0x2e2d91,'1d':_0x16517c,'3d':0x3*_0x16517c,'1w':_0x50377f,'1M':_0x4f8cf2};return _0x5b58b1[_0x7ed718]||_0x47ed5f;}function _0x296a(){const _0x31cf75=['bidQty','includes','Invalid\x20OHLCV\x20response\x20format:\x20','console','sort','prototype','/api/v3/ticker/24hr?symbol=','bidPrice','&interval=','https://api.binance.com/api/v3/klines?symbol=','12h','length','Failed\x20to\x20fetch\x20Binance\x20OHLCV:\x20','stringify','status','openPrice','315bryoiD','15m','volume','26oNPejC','TRADING','172207flnVSx','constructor','7949997uxANON','return\x20(function()\x20','log','lastPrice','now','&limit=','Failed\x20to\x20fetch\x20Binance\x20ticker','Failed\x20to\x20fetch\x20Binance\x20symbols','&startTime=','binance','22247nRjViB','apply','359024uTAhcV','quoteVolume','json','filter','44BCCAdE','30m','84340jCrkwT','{}.constructor(\x22return\x20this\x22)(\x20)','isArray','priceChangePercent','bind','table','78NKSqoe','Unsupported\x20timeframe:\x20',',\x20must\x20be\x20between\x201\x20and\x201000','__proto__','warn','1210WIMnbr','floor','exception','symbols','N/A',',\x20expected\x20format\x20is\x20BTC/USDT','Invalid\x20limit:\x20',')\x20must\x20be\x20less\x20than\x20endTime\x20(','info','askPrice','778209leWbVu','map','toString'];_0x296a=function(){return _0x31cf75;};return _0x296a();}export const nextHtfGranularityMap={'1s':'1m','1m':'3m','3m':'5m','5m':_0x3862a6(0x1cf),'15m':_0x3862a6(0x1a5),'30m':'1h','1h':'2h','2h':'4h','4h':'6h','6h':'8h','8h':_0x3862a6(0x1c8),'12h':'1d','1d':'3d','3d':'1w','1w':'1M','1M':''};export function timeframeFromMs(_0x88878c){const _0x47cfde=_0x3862a6;return _0x88878c===0x3e8?'1s':_0x88878c===0xea60?'1m':_0x88878c===0x2bf20?'3m':_0x88878c===0x493e0?'5m':_0x88878c===0xdbba0?_0x47cfde(0x1cf):_0x88878c===0x1b7740?_0x47cfde(0x1a5):_0x88878c===0x36ee80?'1h':_0x88878c===0x6ddd00?'2h':_0x88878c===0xdbba00?'4h':_0x88878c===0x1499700?'6h':_0x88878c===0x1b77400?'8h':_0x88878c===0x2932e00?_0x47cfde(0x1c8):_0x88878c===0x5265c00?'1d':_0x88878c===0xf731400?'3d':_0x88878c===0x240c8400?'1w':_0x88878c===0x9a7ec800?'1M':_0x47cfde(0x1b5);}export async function fetchSymbols(){const _0x2996b2=_0x3862a6;if(symbolsCache[_0x2996b2(0x19d)][_0x2996b2(0x1c9)]>0x0)return symbolsCache[_0x2996b2(0x19d)];const _0x4cad98=BASE_URL+'/api/v3/exchangeInfo',_0x2d7ec4=corsProxy+_0x4cad98,_0x136c91=await fetch(_0x2d7ec4);if(!_0x136c91['ok'])throw new Error(_0x2996b2(0x19b));const _0x18e05e=await _0x136c91[_0x2996b2(0x1a2)]();let _0x1b4733=_0x18e05e[_0x2996b2(0x1b4)][_0x2996b2(0x1a3)](_0xa3310a=>_0xa3310a[_0x2996b2(0x1cc)]===_0x2996b2(0x1d2))['map'](_0x4d8457=>_0x4d8457['baseAsset']+'/'+_0x4d8457['quoteAsset']);return symbolsCache['binance']=_0x1b4733,symbolsCache[_0x2996b2(0x19d)];}export async function fetchOHLCV(_0x45cf6f,_0x2666b8,_0x37d623,_0x1466ac,_0x2c6be8){const _0x4e0812=_0x3862a6,_0x10bba8=timeframes[_0x2666b8];if(!_0x10bba8)throw new Error(_0x4e0812(0x1ad)+_0x2666b8);if(!_0x45cf6f||!_0x45cf6f[_0x4e0812(0x1bf)]('/'))throw new Error('Invalid\x20symbol\x20format:\x20'+_0x45cf6f+_0x4e0812(0x1b6));const _0x2f247d=_0x45cf6f['replace']('/',''),_0x46bb5a=Math[_0x4e0812(0x1b2)](_0x37d623),_0x2bf421=Math[_0x4e0812(0x1b2)](_0x1466ac);if(_0x46bb5a>=_0x2bf421)throw new Error('Invalid\x20time\x20range:\x20startTime\x20('+_0x46bb5a+_0x4e0812(0x1b8)+_0x2bf421+')');if(_0x2c6be8<0x1||_0x2c6be8>0x3e8)throw new Error(_0x4e0812(0x1b7)+_0x2c6be8+_0x4e0812(0x1ae));const _0x228353=_0x4e0812(0x1c7)+_0x2f247d+_0x4e0812(0x1c6)+_0x10bba8+_0x4e0812(0x19c)+_0x46bb5a+'&endTime='+_0x2bf421+_0x4e0812(0x199)+_0x2c6be8,_0x3e4dc6=corsProxy+_0x228353,_0x2fb92b=await fetch(_0x3e4dc6);if(!_0x2fb92b['ok']){const _0x5411ba=await _0x2fb92b['text']();throw new Error(_0x4e0812(0x1ca)+_0x2fb92b[_0x4e0812(0x1cc)]+'\x20'+_0x5411ba);}const _0xc1f6a9=await _0x2fb92b['json']();if(!Array[_0x4e0812(0x1a8)](_0xc1f6a9))throw new Error(_0x4e0812(0x1c0)+JSON[_0x4e0812(0x1cb)](_0xc1f6a9));return _0xc1f6a9[_0x4e0812(0x1bc)](_0x4e6053=>[Number(_0x4e6053[0x0]),Number(_0x4e6053[0x1]),Number(_0x4e6053[0x2]),Number(_0x4e6053[0x3]),Number(_0x4e6053[0x4]),Number(_0x4e6053[0x5]),Number(_0x4e6053[0x7])])[_0x4e0812(0x1c2)]((_0x52cc32,_0x41a2a0)=>_0x52cc32[0x0]-_0x41a2a0[0x0]);}export async function fetchTicker(_0x5ebe22){const _0x286c38=_0x3862a6,_0x96cb32=BASE_URL+_0x286c38(0x1c4)+_0x5ebe22['replace']('/',''),_0x18f77e=corsProxy+_0x96cb32,_0x25cea9=await fetch(_0x18f77e);if(!_0x25cea9['ok'])throw new Error(_0x286c38(0x19a));const _0x335ec0=await _0x25cea9[_0x286c38(0x1a2)]();return{'symbol':_0x5ebe22,'high24h':Number(_0x335ec0['highPrice']),'open':Number(_0x335ec0[_0x286c38(0x1cd)]),'low24h':Number(_0x335ec0['lowPrice']),'lastPr':Number(_0x335ec0[_0x286c38(0x197)]),'quoteVolume':Number(_0x335ec0[_0x286c38(0x1a1)]),'baseVolume':Number(_0x335ec0[_0x286c38(0x1d0)]),'bidPr':Number(_0x335ec0[_0x286c38(0x1c5)]),'askPr':Number(_0x335ec0[_0x286c38(0x1ba)]),'bidSz':Number(_0x335ec0[_0x286c38(0x1be)]),'askSz':Number(_0x335ec0['askQty']),'change24h':Number(_0x335ec0[_0x286c38(0x1a9)])/0x64,'ts':Date[_0x286c38(0x198)]()};}