const _0x137e0f=_0x1099;(function(_0x4e544e,_0x23cf0b){const _0x2552ed=_0x1099,_0x44558e=_0x4e544e();while(!![]){try{const _0x19d243=parseInt(_0x2552ed(0x1ae))/0x1*(-parseInt(_0x2552ed(0x1e6))/0x2)+parseInt(_0x2552ed(0x11b))/0x3*(parseInt(_0x2552ed(0x12c))/0x4)+parseInt(_0x2552ed(0x19c))/0x5+parseInt(_0x2552ed(0xa1))/0x6*(-parseInt(_0x2552ed(0xa5))/0x7)+parseInt(_0x2552ed(0x11c))/0x8*(-parseInt(_0x2552ed(0x1cb))/0x9)+-parseInt(_0x2552ed(0x1e8))/0xa+parseInt(_0x2552ed(0x1c8))/0xb*(parseInt(_0x2552ed(0x1c3))/0xc);if(_0x19d243===_0x23cf0b)break;else _0x44558e['push'](_0x44558e['shift']());}catch(_0x3e75f8){_0x44558e['push'](_0x44558e['shift']());}}}(_0x1c2e,0x78981));const _0x2c759d=(function(){let _0x497103=!![];return function(_0x1cc87f,_0x1368e9){const _0x23d5a4=_0x497103?function(){const _0x4d7209=_0x1099;if(_0x1368e9){const _0x2dbdf3=_0x1368e9[_0x4d7209(0xb0)](_0x1cc87f,arguments);return _0x1368e9=null,_0x2dbdf3;}}:function(){};return _0x497103=![],_0x23d5a4;};}()),_0x23c4a3=_0x2c759d(this,function(){const _0x395a6c=_0x1099;let _0x32eeec;try{const _0x21beb2=Function(_0x395a6c(0x1b0)+_0x395a6c(0x18b)+');');_0x32eeec=_0x21beb2();}catch(_0x3d5b40){_0x32eeec=window;}const _0x34df4b=_0x32eeec['console']=_0x32eeec[_0x395a6c(0x133)]||{},_0x3b5d50=[_0x395a6c(0x124),'warn',_0x395a6c(0xa3),'error','exception',_0x395a6c(0x151),_0x395a6c(0xf1)];for(let _0x2757a2=0x0;_0x2757a2<_0x3b5d50[_0x395a6c(0x16f)];_0x2757a2++){const _0x14e0f1=_0x2c759d[_0x395a6c(0x15a)][_0x395a6c(0x1a4)]['bind'](_0x2c759d),_0x46d568=_0x3b5d50[_0x2757a2],_0x212f48=_0x34df4b[_0x46d568]||_0x14e0f1;_0x14e0f1['__proto__']=_0x2c759d[_0x395a6c(0x93)](_0x2c759d),_0x14e0f1[_0x395a6c(0x165)]=_0x212f48[_0x395a6c(0x165)][_0x395a6c(0x93)](_0x212f48),_0x34df4b[_0x46d568]=_0x14e0f1;}});_0x23c4a3();import{generateTradingSignal}from'./signals.js';import{generateSmcTradingSignal}from'./signals-smc.js';import{getIndicatorParams,resetInputs,refreshTable,updateWithSignal,updateTickerUI,updateStatus,initializePushNotifications}from'./ui.js';import{formatUnixTimestamp}from'./utils.js';import{validateWeights,validatePercentageInputs,validateLookback,validateHtfLimit,validateCandlePatternSettings}from'./validation.js';import{updateChartWithSignal}from'./chart.js';import*as _0xc25b81 from'./exchanges/bitmart.js';import*as _0x34921a from'./exchanges/bitget.js';import*as _0x2a8433 from'./exchanges/mexc.js';import*as _0xe41ed1 from'./exchanges/binance.js';export const exchanges={'bitmart':_0xc25b81,'bitget':_0x34921a,'mexc':_0x2a8433,'binance':_0xe41ed1};export let exchangeNames=[_0x137e0f(0x190),_0x137e0f(0x1f8),'mexc','binance'];export const symbolsCache={'bitmart':[],'bitget':[],'mexc':[],'binance':[]};export const popularSymbols={'binance':['BTC/USDT',_0x137e0f(0x153),_0x137e0f(0x1b2),_0x137e0f(0x172),'ADA/USDT',_0x137e0f(0xe1),_0x137e0f(0x140),_0x137e0f(0x117),'TRX/USDT',_0x137e0f(0xe3),_0x137e0f(0x175),_0x137e0f(0xa8),_0x137e0f(0x110),_0x137e0f(0x139),'LTC/USDT',_0x137e0f(0xf4),'ALGO/USDT',_0x137e0f(0x1b6),_0x137e0f(0x1bd),_0x137e0f(0x163),_0x137e0f(0x18e),_0x137e0f(0x17a),_0x137e0f(0xc5),_0x137e0f(0x1dd),'THETA/USDT',_0x137e0f(0x130),_0x137e0f(0x136),'GRT/USDT','EOS/USDT',_0x137e0f(0x16e),'SAND/USDT',_0x137e0f(0xfd),_0x137e0f(0x1c6),_0x137e0f(0x1e9),_0x137e0f(0x10b),'CRV/USDT',_0x137e0f(0x1f0),_0x137e0f(0x103),_0x137e0f(0xfe),'1INCH/USDT',_0x137e0f(0x1a5),_0x137e0f(0x1a6),'NEO/USDT',_0x137e0f(0x1d6),'KSM/USDT',_0x137e0f(0x1d7),'IOTA/USDT',_0x137e0f(0x79),_0x137e0f(0xea),_0x137e0f(0x1e3)],'mexc':[_0x137e0f(0x1e1),'ETH/USDT','XRP/USDT',_0x137e0f(0x1ef),_0x137e0f(0xf4),'SOL/USDT','DOGE/USDT',_0x137e0f(0xc3),'BNB/USDT',_0x137e0f(0x18a),_0x137e0f(0x175),'LINK/USDT',_0x137e0f(0x110),_0x137e0f(0x139),_0x137e0f(0xe3),_0x137e0f(0x117),_0x137e0f(0x1d1),'VET/USDT',_0x137e0f(0x1bd),_0x137e0f(0x163),_0x137e0f(0x18e),'XLM/USDT','ETC/USDT',_0x137e0f(0x1dd),_0x137e0f(0x84),_0x137e0f(0x130),_0x137e0f(0x136),'GRT/USDT',_0x137e0f(0x123),_0x137e0f(0x16e),_0x137e0f(0x7e),_0x137e0f(0xfd),'AXS/USDT',_0x137e0f(0x1e9),'ENJ/USDT',_0x137e0f(0x120),_0x137e0f(0x1f0),'UNI/USDT',_0x137e0f(0xfe),_0x137e0f(0x8d),_0x137e0f(0x1a5),_0x137e0f(0x1a6),_0x137e0f(0xbc),_0x137e0f(0x1d6),_0x137e0f(0xb7),_0x137e0f(0x1d7),_0x137e0f(0xc8),'ORDI/USDT',_0x137e0f(0xea),'INJ/USDT'],'bitmart':[_0x137e0f(0x1e1),'ETH/USDT',_0x137e0f(0x172),_0x137e0f(0x1ef),_0x137e0f(0x140),'SOL/USDT',_0x137e0f(0xc3),_0x137e0f(0x1b2),_0x137e0f(0x18a),_0x137e0f(0x175),_0x137e0f(0xa8),_0x137e0f(0x110),_0x137e0f(0x139),'AVAX/USDT',_0x137e0f(0x117),_0x137e0f(0x1d1),_0x137e0f(0x1b6),_0x137e0f(0x1bd),_0x137e0f(0x163),'NEAR/USDT',_0x137e0f(0x17a),_0x137e0f(0xc5),_0x137e0f(0x1dd),_0x137e0f(0x84),'FTM/USDT',_0x137e0f(0x136),'GRT/USDT',_0x137e0f(0x123),_0x137e0f(0x16e),_0x137e0f(0x7e),_0x137e0f(0xfd),_0x137e0f(0x1c6),_0x137e0f(0x1e9),_0x137e0f(0x10b),_0x137e0f(0x120),_0x137e0f(0x1f0),_0x137e0f(0x103),_0x137e0f(0xfe),_0x137e0f(0x8d),'ZEC/USDT',_0x137e0f(0x1a6),_0x137e0f(0xbc),'XTZ/USDT',_0x137e0f(0xb7),_0x137e0f(0x1d7),_0x137e0f(0xc8),_0x137e0f(0x79),_0x137e0f(0xea),'INJ/USDT',_0x137e0f(0x11e)],'bitget':[_0x137e0f(0x1e1),'ETH/USDT',_0x137e0f(0x172),_0x137e0f(0x140),'SOL/USDT',_0x137e0f(0xc3),'BNB/USDT',_0x137e0f(0x18a),_0x137e0f(0x175),_0x137e0f(0xa8),_0x137e0f(0x110),_0x137e0f(0x139),_0x137e0f(0xe3),_0x137e0f(0x117),_0x137e0f(0x1d1),_0x137e0f(0x1b6),'ICP/USDT','HBAR/USDT',_0x137e0f(0x18e),_0x137e0f(0x17a),_0x137e0f(0xc5),'FIL/USDT',_0x137e0f(0x84),_0x137e0f(0x130),'AAVE/USDT',_0x137e0f(0xe0),'EOS/USDT',_0x137e0f(0x16e),_0x137e0f(0x7e),'MANA/USDT',_0x137e0f(0x1c6),_0x137e0f(0x1e9),'ENJ/USDT',_0x137e0f(0x120),_0x137e0f(0x1f0),_0x137e0f(0x103),_0x137e0f(0xfe),'1INCH/USDT',_0x137e0f(0x1a5),_0x137e0f(0x1a6),_0x137e0f(0xbc),_0x137e0f(0x1d6),'KSM/USDT',_0x137e0f(0x1d7),_0x137e0f(0xc8),'ORDI/USDT',_0x137e0f(0xea),'INJ/USDT',_0x137e0f(0x11e),_0x137e0f(0x1e4)]};export let currentExchange='';export let newSymbol=_0x137e0f(0x1e1);export let symbol=null;export let granularity=null;export let baseToken='BTC';export let quoteToken='USDT';export let granularityMs=0x36ee80;export let higherGranularityMs=0xdbba00;export let granularityMap;export let nextHtfGranularityMap;export let baseVolumeTable=null;export let quoteVolumeTable=null;export let usdtVolumeTable=null;export let newCandles=[];export let globalCandles=[];export let withHtf=![];export let higherTimeframeCandles=[];export let allCandles=[];export let allHtfCandles=[];export let tradeSize=null;export let candlesData=[];export let latestCandle=null;export let htfLatestCandle=null;export let withLatestCandle=![];export let ticker=null;export let initialState={'symbol':null,'newSymbol':null,'baseVolumeTable':null,'quoteVolumeTable':null,'granularity':null,'higherGranularity':null,'limit':null,'htfLimit':0x3c,'startTime':null,'endTime':null,'tradeSize':null,'feePercent':null,'indicators':null,'candlePatterns':null,'chartPatterns':null,'weightParams':null,'priceLevelParams':null,'candles':null,'higherTimeframeCandles':null,'signalResult':null,'htfSignalResult':null};export let recentState={};export let signalResult={};export let htfSignalResult={};export let signalMarkerIndex=-0x1;export let htfSignalMarkerIndex=-0x1;let lastSignalType=null,lastSignalStrength=null,lastHtfSignalType=null,lastHtfSignalStrength=null,isInitialSignalPushed=![];export let onlyRecent=![];export let onlyStrong=![];export let isBackTest=![];const isBasic=!![],isPro=![],isPremium=![],isRetailer=![],isEnterprise=![],isPartner=![],highLimitExchanges=[_0x137e0f(0x170),_0x137e0f(0x1f8)];let OHLCV_CALLS_PER_SECOND=0x1,TICKER_CALLS_PER_SECOND=0x1;const defaultRequestLimit=_0xadf4ef=>_0xadf4ef?0x4:0x5,highRequestLimit=0x14;let apiCallCount=0x0,lastSecondStartOHLCV=Date[_0x137e0f(0x1ab)](),tickerCallCount=0x0,lastSecondStartTicker=Date[_0x137e0f(0x1ab)]();const SECOND_MS=0x3e8;let realTimeInterval=null,tickerInterval=null,isFetchingOHLCV=![],isFetchingTicker=![],ohlcvAbortController=null,tickerAbortController=null,pendingOhlcvCalls=0x0,pendingTickerCalls=0x0;const getMaxPendingCalls=_0x31ac3f=>_0x31ac3f===_0x137e0f(0x19b)?0x2:0x3;function _0x1099(_0x1ec64b,_0x137d4e){const _0x3ba2ce=_0x1c2e();return _0x1099=function(_0x23c4a3,_0x2c759d){_0x23c4a3=_0x23c4a3-0x76;let _0xef9036=_0x3ba2ce[_0x23c4a3];return _0xef9036;},_0x1099(_0x1ec64b,_0x137d4e);}let lastLatestCandleTimestamp=0x0,lastHtfLatestCandleTimestamp=0x0;function _0x1c2e(){const _0x12a00d=['-enabled','.granularity-button[data-timeframe=\x22','globalCandles','bind','input-start-time','\x20candles\x20for\x20','stop-loss-strong-buy','minCandleIndex','period','take-profit-weak-buy','-kijun','N/A','Cannot\x20recalculate:\x20Current\x20exchange\x20(','take-profit-multiplier-sell','use-smc-only','active','Invalid\x20granularity:\x20','120ZpQqUq','push','info','priceLevelParams','184555Mozcpy','stop-loss-moderate-sell','value','LINK/USDT','USDT\x20Volume','type','-displacement','indicator-weight','-step','split','-senkou','apply','symbol-results-list','slice','deviation','Symbol\x20is\x20required','Active\x20pairs\x20(','take-profit-moderate-buy','KSM/USDT','take-profit-very-weak-sell','takeProfitStrongBuy','indicatorParams','symbol-result-item','NEO/USDT','stopLossStrongSell','\x20not\x20found.','Lookback\x20period\x20exceeds\x20maximum\x20of\x2010\x20candles\x20for\x20onlyRecent\x20mode','enable-push-notifications','Error:\x20Exchange\x20','supportResistanceLookback','ADA/USDT','input','ETC/USDT','toLowerCase','timeframe','IOTA/USDT','short','Candle\x20pattern\x20input\x20not\x20found:\x20candle-pattern-','recalculate','Error\x20resetting\x20analysis:\x20','Failed\x20to\x20cache\x20all\x20pairs','Start\x20time\x20must\x20be\x20before\x20end\x20time','appendChild','add','stop-loss-strong-sell','display','remove','style','take-profit-multiplier-buy','multiplier','No\x20candles\x20available\x20for\x20the\x20specified\x20time\x20range\x20and\x20limit','MEXC\x20rate\x20limit\x20exceeded,\x20pausing\x20for\x2060s...','No\x20initial\x20data\x20available','granularity-buttons','Backtest\x20mode\x20disabled:\x20Fetching\x20new\x20data','fetchTicker','takeProfitVeryWeakSell','AbortError','stopLossModerateBuy','GRT/USDT','SOL/USDT','\x20in\x20backtest\x20mode\x20(no\x20OHLCV\x20fetching)','AVAX/USDT','pair','with-htf-checkbox','enabled','includes','-weight','Error:\x20Check\x20your\x20network\x20connection','RUNE/USDT','keys','Signal\x20for\x20','candlePatterns','):\x20','function','replace','trace','None','-slow','BCH/USDT','getElementById','Successfully\x20restored\x20recent\x20analysis\x20for\x20','htfLimit','stopLossMultiplierBuy','\x20on\x20','long','Chart\x20pattern\x20input\x20not\x20found:\x20chart-pattern-','base-volume','MANA/USDT','SUSHI/USDT','Fetch\x20OHLCV\x20error:','stopLossModerateSell','weightWeak','trim','UNI/USDT','indicator','input-trade-size','-short','input-htf-limit','\x20Volume','Recalculation\x20not\x20allowed:\x20Backtest\x20mode\x20is\x20disabled.\x20Enable\x20backtest\x20mode\x20to\x20recalculate.','Real-time\x20updates\x20not\x20enabled','ENJ/USDT','stopLossVeryWeakBuy','-weight-strong','stopLossMultiplierSell','abort','TON/USDT','lastPr','-weight-weak','floor','senkou','takeProfitModerateBuy','input-limit','DOT/USDT','only-strong-checkbox','Error:\x20Valid\x20symbol\x20required','Required\x20input\x20elements\x20not\x20found','47445NdoJXI','8jZKzub','-smooth','AR/USDT','Restore\x20initial\x20analysis\x20error:','CRV/USDT','name','tradeSize','EOS/USDT','log','BTC\x20Volume','take-profit-moderate-sell','sort','option','kijun','weightParams','click','80nctAUM','unknown\x20symbol','Invalid\x20time\x20input','No\x20candle\x20data\x20available\x20for\x20recalculation','FTM/USDT','stop-loss-very-weak-sell',')\x20on\x20exchange\x20','console','usdt-volume','Real-time\x20ticker\x20updates\x20started\x20for\x20','AAVE/USDT','stop-loss-weak-sell','\x20|\x20HTF\x20(','SHIB/USDT','Trade\x20size\x20must\x20be\x20positive','candle-pattern-','takeProfitModerateSell','allHtfCandles','Recalculation\x20error:\x20','signalResult','DOGE/USDT','forEach','.granularity-button','button','filter','checked','fetchSymbols','false','\x20OHLCV\x20calls/second','take-profit-strong-sell','Found\x20','Limit\x20must\x20be\x20between\x20200\x20and\x201000\x20(500\x20max\x20on\x20MEXC)','Error\x20fetching\x20ticker:','take-profit-strong-buy','inline-block','Granularity\x20input\x20not\x20found','chartPatterns','table','true','ETH/USDT','restore','input-symbol','takeProfitWeakBuy','startTime','fast','endTime','constructor','none','stopLossWeakSell','input-exchange','querySelector','stop-loss-very-weak-buy','dataset','feePercent','-tenkan','HBAR/USDT','Invalid\x20lastPr\x20for\x20latestCandle:\x20','toString','getTime','replaceWith','Processed\x20','step','signalMarkerIndex','takeProfitVeryWeakBuy','with-latest-candle','Using\x20Only-Strong\x20trend\x20reversal\x20for\x20Support\x20and\x20Resistance','CAKE/USDT','length','binance','setItem','XRP/USDT','onlyRecentCheckbox','stop-loss-weak-buy','MATIC/USDT','tenkan','trend-strength-candles','fetchOHLCV','isArray','XLM/USDT','symbol-result-message','support-resistance-lookback','Granularity\x20is\x20required','toISOString','error','input-granularity','classList','pairs','Unsupported\x20exchange:\x20','object','withHtf','Error:\x20Invalid\x20granularity\x20','takeProfitMultiplierBuy','Lookback\x20updated\x20to\x2010\x20max','HTF\x20Limit\x20must\x20be\x20between\x201\x20and\x201000','TRX/USDT','{}.constructor(\x22return\x20this\x22)(\x20)','chart-weight',')\x20differs\x20from\x20initial\x20exchange\x20(','NEAR/USDT','stopLossWeakBuy','bitmart','Error:\x20','className','real-time-updates',')\x20on\x20','newSymbol','\x20and\x20','stop-loss-multiplier-sell','\x20not\x20found','input-end-time','change','mexc','3520715SjZeHM','-fast','input-fee','stop-loss-moderate-buy','latestCandle','min','strength','No\x20recent\x20recalculation\x20data\x20available','prototype','ZEC/USDT','DASH/USDT','granularityToSeconds','signal','higherTimeframe','Symbol\x20input\x20not\x20found','now','high24h','Invalid\x20Symbol!\x20(e.g.,\x20Correct\x20format\x20is\x20BTC/USDT)','12358toCfpn','<option\x20value=\x22\x22\x20selected>Select\x20Symbol</option>','return\x20(function()\x20','exchangeId','BNB/USDT','unknown\x20exchange','warn','find','VET/USDT','ha-candlestick-checkbox','innerHTML','disabled','granularity-button','granularityExpanded',')\x20at\x20','ICP/USDT','No\x20pair\x20found','nextHtfGranularityMap','stop-loss-multiplier-buy','expanded','message','16788yYOhZu','429','map','AXS/USDT','toUpperCase','9383KAFkyp','chart-pattern-','No\x20indicator\x20parameters\x20available\x20in\x20recentState','2214945HqUqlQ','chart','candle-pattern-max-patterns','max','Maximum\x20of\x2010\x20lookback\x20candles\x20allowed\x20for\x20Only-Recent\x20mode','Only-Recent\x20mode\x20disabled','ALGO/USDT','Real-time\x20updates\x20started\x20for\x20','takeProfitWeakSell','only-recent-checkbox','Indicator\x20enabled\x20input\x20not\x20found:\x20','XTZ/USDT','ATOM/USDT','Invalid\x20higher\x20timeframe:\x20','restore-initial','granularityMap','-max','candleTypes','FIL/USDT','every','takeProfitStrongSell','-period','BTC/USDT','stopLossStrongBuy','INJ/USDT','LDO/USDT','createElement','118eGlvMg','-multiplier','2173100oZfCWA','CHZ/USDT','onclick','stopLossVeryWeakSell','-signal','Real-time\x20updates\x20stopped,\x20all\x20pending\x20requests\x20canceled','displacement','LTC/USDT','YFI/USDT','textContent','withLatestCandle','candlePatternSettings','allCandles','slow','limit','querySelectorAll','bitget',').\x20Data\x20is\x20out\x20of\x20stored\x20bounds.\x20Please\x20fetch\x20new\x20data.','granularity','\x20for\x20','ORDI/USDT','trendStrengthCandles','low24h','candle-pattern-min-index','addEventListener','SAND/USDT','-deviation','candle','timeframes','Successfully\x20restored\x20initial\x20analysis\x20for\x20','Analysis\x20reset\x20successfully','THETA/USDT','No\x20HTF\x20candles\x20available\x20for\x20the\x20specified\x20time\x20range\x20and\x20limit','Only-Strong\x20mode\x20disabled','target','take-profit-weak-sell','unknown\x20granularity','takeProfitMultiplierSell','Limit\x20input\x20not\x20found','restore-recent','1INCH/USDT','weightStrong','smooth'];_0x1c2e=function(){return _0x12a00d;};return _0x1c2e();}function setApiCallLimits(_0x1c0494,_0x1b79bf){const _0x8fc739=_0x137e0f,_0x38fbc2=highLimitExchanges[_0x8fc739(0xe7)](_0x1c0494),_0xdedae3=_0x38fbc2?highRequestLimit:defaultRequestLimit(_0x1b79bf);if(isPremium||isEnterprise||isPartner)OHLCV_CALLS_PER_SECOND=_0x38fbc2&&isEnterprise?0x14:0x5,TICKER_CALLS_PER_SECOND=_0x38fbc2&&isEnterprise?0x14:0x5;else{if(isRetailer)OHLCV_CALLS_PER_SECOND=0x3,TICKER_CALLS_PER_SECOND=0x3;else isPro?(OHLCV_CALLS_PER_SECOND=0x2,TICKER_CALLS_PER_SECOND=0x2):(OHLCV_CALLS_PER_SECOND=0x1,TICKER_CALLS_PER_SECOND=0x1);}}export let mapCandlesToChartFormat=_0x2dca42=>{const _0x27eb1f=_0x137e0f;if(!_0x2dca42||!Array[_0x27eb1f(0x179)](_0x2dca42))return[];return _0x2dca42[_0x27eb1f(0x144)](_0x22015c=>_0x22015c&&Array[_0x27eb1f(0x179)](_0x22015c)&&_0x22015c['length']>=0x7)[_0x27eb1f(0x1c5)](_0x20003c=>[Number(_0x20003c[0x0]),Number(_0x20003c[0x1]),Number(_0x20003c[0x2]),Number(_0x20003c[0x3]),Number(_0x20003c[0x4]),Number(_0x20003c[0x5]),Number(_0x20003c[0x6])]);};export async function cacheAllSymbols(){const _0x132538=_0x137e0f;let _0x559185=[];for(const _0x3a7e44 of exchangeNames){if(symbolsCache[_0x3a7e44][_0x132538(0x16f)]===0x0)try{symbolsCache[_0x3a7e44]=await exchanges[_0x3a7e44][_0x132538(0x146)](),_0x559185[_0x132538(0xa2)](symbolsCache[_0x3a7e44][_0x132538(0x16f)]>0x0);}catch(_0x569bac){updateStatus(_0x132538(0xe9),![]),_0x559185[_0x132538(0xa2)](![]);}else _0x559185[_0x132538(0xa2)](!![]);}const _0x27a993=_0x559185[_0x132538(0x1de)](_0x1345d5=>_0x1345d5===!![]);return _0x27a993?!![]:await cacheAllSymbols();}export async function fetchOHLCV(){const _0x4c45d1=_0x137e0f;if(isFetchingOHLCV){pendingOhlcvCalls++;const _0x33f0e4=document['getElementById'](_0x4c45d1(0x15d))?.[_0x4c45d1(0xa7)]||_0x4c45d1(0x1f8),_0x150208=getMaxPendingCalls(_0x33f0e4);if(pendingOhlcvCalls>=_0x150208)return ohlcvAbortController&&(ohlcvAbortController[_0x4c45d1(0x10f)](),ohlcvAbortController=null),isFetchingOHLCV=![],pendingOhlcvCalls=0x0,{'success':![]};return{'success':![]};}isFetchingOHLCV=!![],pendingOhlcvCalls=0x1,ohlcvAbortController=new AbortController();try{recentState=null;const _0x2aeeca=Date[_0x4c45d1(0x1ab)](),_0x4fd686=document['getElementById'](_0x4c45d1(0xe5)),_0xb78552=document[_0x4c45d1(0xf5)]('with-latest-candle'),_0x143b47=document['getElementById'](_0x4c45d1(0x193));withHtf=_0x4fd686?.[_0x4c45d1(0x145)]||![],withLatestCandle=_0xb78552?.['checked']||![];const _0x1e464e=_0x143b47?.['checked']||![],_0x517ab0=document[_0x4c45d1(0xf5)](_0x4c45d1(0x15d))?.[_0x4c45d1(0xa7)]||_0x4c45d1(0x1f8);setApiCallLimits(_0x517ab0,withHtf);_0x2aeeca-lastSecondStartOHLCV>=SECOND_MS&&(apiCallCount=0x0,lastSecondStartOHLCV=_0x2aeeca);if(apiCallCount>=OHLCV_CALLS_PER_SECOND){const _0x49caae=SECOND_MS-(_0x2aeeca-lastSecondStartOHLCV);return await new Promise(_0x14b013=>setTimeout(_0x14b013,_0x49caae+0xa)),isFetchingOHLCV=![],pendingOhlcvCalls=0x0,{'success':![]};}apiCallCount++,currentExchange=_0x517ab0[_0x4c45d1(0x1c7)]();const _0x1c0a71=exchanges[_0x517ab0];if(!_0x1c0a71)throw new Error(_0x4c45d1(0x183)+_0x517ab0);const _0x30a244=document[_0x4c45d1(0xf5)](_0x4c45d1(0x155));if(!_0x30a244)throw new Error(_0x4c45d1(0x1aa));newSymbol=_0x30a244[_0x4c45d1(0xa7)][_0x4c45d1(0x102)]();const _0x2db4ce=document[_0x4c45d1(0xf5)](_0x4c45d1(0x180));if(!_0x2db4ce)throw new Error('Granularity\x20input\x20not\x20found');granularity=_0x2db4ce[_0x4c45d1(0xa7)];const _0x5171ea=document[_0x4c45d1(0xf5)](_0x4c45d1(0x116));if(!_0x5171ea)throw new Error(_0x4c45d1(0x8b));const _0xb96313=document[_0x4c45d1(0xf5)](_0x4c45d1(0x107));let _0x1322f2=_0xb96313?parseInt(_0xb96313[_0x4c45d1(0xa7)])||0x3c:0x3c,_0x3f9d89=parseInt(_0x5171ea['value']);const _0x2f0e36=document[_0x4c45d1(0xf5)](_0x4c45d1(0x94)),_0xcabf3e=document[_0x4c45d1(0xf5)]('input-end-time'),_0x39d51d=document[_0x4c45d1(0xf5)](_0x4c45d1(0x105));let _0xcebe61=_0x39d51d?parseFloat(_0x39d51d[_0x4c45d1(0xa7)])||0x3e8:0x3e8;const _0x5afbd5=document[_0x4c45d1(0xf5)](_0x4c45d1(0x19e));let _0x15c289=_0x5afbd5?parseFloat(_0x5afbd5['value'])||0x0:0x0;if(!newSymbol)throw new Error(_0x4c45d1(0xb4));if(!newSymbol[_0x4c45d1(0xe7)]('/'))throw new Error(_0x4c45d1(0x1ad));if(!granularity)throw new Error(_0x4c45d1(0x17d));if(isNaN(_0x3f9d89)||_0x3f9d89<0xc8||_0x3f9d89>0x3e8||_0x517ab0===_0x4c45d1(0x19b)&&_0x3f9d89>0x1f4)throw new Error(_0x4c45d1(0x14b));if(isNaN(_0x1322f2)||_0x1322f2<0x1||_0x1322f2>0x3e8)throw new Error(_0x4c45d1(0x189));if(isNaN(_0xcebe61)||_0xcebe61<=0x0)throw new Error(_0x4c45d1(0x13a));let _0x15d320=newSymbol[_0x4c45d1(0xae)]('/');baseToken=_0x15d320[0x0],quoteToken=_0x15d320[0x1],symbol=newSymbol[_0x4c45d1(0xf0)]('/',''),granularityMs=_0x1c0a71[_0x4c45d1(0x1da)][granularity];if(!granularityMs)throw new Error(_0x4c45d1(0xa0)+granularity);let _0x1b7e5f,_0x4de5e6;if(_0x2f0e36&&_0x2f0e36['value']&&_0xcabf3e&&_0xcabf3e[_0x4c45d1(0xa7)]){_0x1b7e5f=new Date(_0x2f0e36[_0x4c45d1(0xa7)])[_0x4c45d1(0x166)](),_0x4de5e6=new Date(_0xcabf3e['value'])[_0x4c45d1(0x166)]();if(isNaN(_0x1b7e5f)||isNaN(_0x4de5e6))throw new Error(_0x4c45d1(0x12e));if(_0x1b7e5f>=_0x4de5e6)throw new Error(_0x4c45d1(0xce));}else _0x4de5e6=Math['ceil'](Date[_0x4c45d1(0x1ab)]()/granularityMs)*granularityMs+granularityMs,_0x1b7e5f=_0x4de5e6-_0x1c0a71[_0x4c45d1(0x1a7)](granularity)*_0x3f9d89*0x3e8;const _0x407502=_0x517ab0===_0x4c45d1(0x19b)?Math[_0x4c45d1(0x1a1)](_0x3f9d89,0x1f4):_0x3f9d89;_0x4de5e6=_0x4de5e6+granularityMs,newCandles=await _0x1c0a71[_0x4c45d1(0x178)](newSymbol,granularity,_0x1b7e5f,_0x4de5e6,_0x407502,{'signal':ohlcvAbortController[_0x4c45d1(0x1a8)]});const _0x48f7d2=Math[_0x4c45d1(0x113)](Date[_0x4c45d1(0x1ab)]()/granularityMs)*granularityMs,_0x270d2d=_0x48f7d2+granularityMs,_0x4f6b1a=newCandles[_0x4c45d1(0x144)](_0x28f364=>_0x28f364[0x0]<_0x48f7d2);let _0x4a38fd=newCandles[_0x4c45d1(0x1b5)](_0x36142b=>_0x36142b[0x0]>=_0x48f7d2);const _0x3d4351=_0x2c849b=>{const _0x3c0dd0=_0x4c45d1;if(!_0x2c849b||!Array[_0x3c0dd0(0x179)](_0x2c849b)||_0x2c849b['length']<0x6)return![];const [_0xdda1e0,_0x5e2ddf,_0x4bf9c2,_0x28b21d,_0x4a9858,_0x5888f7]=_0x2c849b[_0x3c0dd0(0x1c5)](Number);return!isNaN(_0xdda1e0)&&!isNaN(_0x5e2ddf)&&!isNaN(_0x4bf9c2)&&!isNaN(_0x28b21d)&&!isNaN(_0x4a9858)&&!isNaN(_0x5888f7)&&_0x4bf9c2>=_0x28b21d&&_0x5e2ddf>0x0&&_0x4a9858>0x0&&_0x5888f7>=0x0;};latestCandle=_0x4a38fd&&_0x3d4351(_0x4a38fd)?_0x4a38fd:null,globalCandles=[..._0x4f6b1a][_0x4c45d1(0x127)]((_0x1958f6,_0x4c53ae)=>_0x1958f6[0x0]-_0x4c53ae[0x0])['slice'](-_0x3f9d89),higherTimeframeCandles=[],htfLatestCandle=null;if(withHtf){const _0x2283a5=_0x1c0a71[_0x4c45d1(0x1bf)][granularity];higherGranularityMs=_0x1c0a71['granularityMap'][_0x2283a5];if(!higherGranularityMs)console[_0x4c45d1(0x1b4)](_0x4c45d1(0x1d8)+_0x2283a5);else{if(withHtf){const _0x2a9c81=Math['floor'](Date[_0x4c45d1(0x1ab)]()/higherGranularityMs)*higherGranularityMs,_0x553679=_0x2a9c81+higherGranularityMs,_0x25987a=Math['ceil'](Date[_0x4c45d1(0x1ab)]()/higherGranularityMs)*higherGranularityMs+higherGranularityMs,_0x501a11=_0x25987a-_0x1c0a71['granularityToSeconds'](_0x2283a5)*(_0x1322f2+0x1)*0x3e8,_0x48a7e0=await _0x1c0a71[_0x4c45d1(0x178)](newSymbol,_0x2283a5,_0x501a11,_0x25987a,_0x1322f2);higherTimeframeCandles=_0x48a7e0[_0x4c45d1(0x144)](_0x4466ce=>_0x4466ce[0x0]<_0x2a9c81)[_0x4c45d1(0xb2)](-_0x1322f2),htfLatestCandle=_0x48a7e0[_0x4c45d1(0x1b5)](_0x3aeedb=>_0x3aeedb[0x0]>=_0x2a9c81),htfLatestCandle=htfLatestCandle&&_0x3d4351(htfLatestCandle)?htfLatestCandle:null;}}}const _0x5975b1=globalCandles[_0x4c45d1(0x16f)]>0x0?Math[_0x4c45d1(0x1a1)](...globalCandles['map'](_0x4cb267=>_0x4cb267[0x0])):_0x1b7e5f,_0x1da717=globalCandles['length']>0x0?Math[_0x4c45d1(0x1ce)](...globalCandles['map'](_0x80da25=>_0x80da25[0x0])):_0x4de5e6,_0x2481c8=higherTimeframeCandles[_0x4c45d1(0x16f)]>0x0?Math[_0x4c45d1(0x1a1)](...higherTimeframeCandles[_0x4c45d1(0x1c5)](_0x1ab753=>_0x1ab753[0x0])):null,_0x28e769=higherTimeframeCandles['length']>0x0?Math[_0x4c45d1(0x1ce)](...higherTimeframeCandles['map'](_0x205b8c=>_0x205b8c[0x0])):null,_0x562f2f=document[_0x4c45d1(0xf5)](_0x4c45d1(0xfc));_0x562f2f&&(baseVolumeTable=_0x562f2f[_0x4c45d1(0x1f1)]=baseToken+_0x4c45d1(0x108)||_0x4c45d1(0x125));const _0x33ee0f=document[_0x4c45d1(0xf5)](_0x4c45d1(0x134));_0x33ee0f&&(usdtVolumeTable=_0x33ee0f[_0x4c45d1(0x1f1)]=_0x4c45d1(0xa9));const _0x1df0c=document[_0x4c45d1(0xf5)]('quote-volume');_0x1df0c&&(quoteVolumeTable=_0x1df0c[_0x4c45d1(0x1f1)]=quoteToken+_0x4c45d1(0x108)||'USDT\x20Volume');const _0x289060=document[_0x4c45d1(0xf5)](_0x4c45d1(0xcb));_0x289060&&(_0x289060[_0x4c45d1(0x1b9)]=!globalCandles||globalCandles[_0x4c45d1(0x16f)]===0x0);refreshTable(globalCandles),allCandles=latestCandle?[...globalCandles,latestCandle]:globalCandles,allHtfCandles=withHtf&&htfLatestCandle?[...higherTimeframeCandles,htfLatestCandle]:higherTimeframeCandles;const _0x18c1a7=getIndicatorParams(),_0x133d80=withLatestCandle,_0x27f0cd=_0x133d80&&latestCandle?[...globalCandles,latestCandle]:globalCandles,_0x32d7f7=withHtf&&_0x133d80&&htfLatestCandle?[...higherTimeframeCandles,htfLatestCandle]:higherTimeframeCandles,_0x4d8dcd=document['getElementById']('use-smc-only')?.['checked'];_0x4d8dcd?signalResult=generateSmcTradingSignal(mapCandlesToChartFormat(_0x27f0cd)):signalResult=generateTradingSignal(mapCandlesToChartFormat(_0x27f0cd));withHtf&&(_0x4d8dcd?htfSignalResult=generateSmcTradingSignal(mapCandlesToChartFormat(_0x32d7f7)):htfSignalResult=generateTradingSignal(mapCandlesToChartFormat(_0x32d7f7)));signalMarkerIndex=_0x133d80?allCandles[_0x4c45d1(0x16f)]-0x1:!_0x133d80&&latestCandle?allCandles['length']-0x2:allCandles['length']-0x1,htfSignalMarkerIndex=withHtf&&_0x133d80?allHtfCandles['length']-0x1:withHtf&&!_0x133d80&&htfLatestCandle?allHtfCandles[_0x4c45d1(0x16f)]-0x2:allHtfCandles['length']-0x1;if(signalMarkerIndex<0x0||_0x27f0cd[_0x4c45d1(0x16f)]<0x2)signalMarkerIndex=_0x27f0cd['length']-0x1;if(htfSignalMarkerIndex<0x0||_0x32d7f7[_0x4c45d1(0x16f)]<0x2)htfSignalMarkerIndex=_0x32d7f7[_0x4c45d1(0x16f)]-0x1;initialState={'exchangeId':_0x517ab0,'newSymbol':newSymbol,'symbol':symbol,'baseToken':baseToken,'quoteToken':quoteToken,'baseVolumeTable':baseVolumeTable,'quoteVolumeTable':quoteVolumeTable,'granularity':granularity,'higherTimeframe':withHtf?_0x1c0a71[_0x4c45d1(0x1bf)][granularity]:null,'limit':_0x3f9d89,'htfLimit':_0x1322f2,'startTime':_0x1b7e5f,'endTime':_0x4de5e6,'minMainTimestamp':_0x5975b1,'maxMainTimestamp':_0x1da717,'minHtfTimestamp':_0x2481c8,'maxHtfTimestamp':_0x28e769,'tradeSize':_0xcebe61,'feePercent':_0x15c289,'indicators':getIndicatorParams()['indicatorParams'],'candlePatterns':getIndicatorParams()[_0x4c45d1(0xed)],'chartPatterns':getIndicatorParams()[_0x4c45d1(0x150)],'weightParams':getIndicatorParams()[_0x4c45d1(0x12a)],'priceLevelParams':getIndicatorParams()[_0x4c45d1(0xa4)],'allCandles':allCandles,'allHtfCandles':allHtfCandles,'globalCandles':globalCandles,'higherTimeframeCandles':higherTimeframeCandles,'latestCandle':latestCandle,'htfLatestCandle':htfLatestCandle,'signalResult':signalResult,'htfSignalResult':htfSignalResult,'withLatestCandle':withLatestCandle,'withHtf':withHtf,'signalMarkerIndex':signalMarkerIndex,'htfSignalMarkerIndex':htfSignalMarkerIndex},updateWithSignal(signalResult,_0x27f0cd,_0x32d7f7),updateChartWithSignal(signalResult,mapCandlesToChartFormat(allCandles),latestCandle,_0x1e464e,withHtf?mapCandlesToChartFormat(allHtfCandles):[],htfLatestCandle,htfSignalResult);if(_0x1e464e&&withLatestCandle&&signalResult){const _0x3bfda8=formatUnixTimestamp(Date[_0x4c45d1(0x1ab)]()),_0x3b3167=signalResult[_0x4c45d1(0xaa)]!==lastSignalType||signalResult[_0x4c45d1(0x1a2)]!==lastSignalStrength,_0x2a1777=withHtf&&htfSignalResult&&(htfSignalResult[_0x4c45d1(0xaa)]!==lastHtfSignalType||htfSignalResult[_0x4c45d1(0x1a2)]!==lastHtfSignalStrength);if(!isInitialSignalPushed||_0x3b3167||_0x2a1777){let _0x330cea=_0x4c45d1(0xec)+newSymbol+_0x4c45d1(0xf9)+_0x517ab0+'\x20('+granularity+_0x4c45d1(0x1bc)+_0x3bfda8+':\x20'+(signalResult[_0x4c45d1(0xaa)]||'None')+'\x20('+(signalResult[_0x4c45d1(0x1a2)]||_0x4c45d1(0x9b))+')';withHtf&&htfSignalResult&&(_0x330cea+=_0x4c45d1(0x138)+_0x1c0a71[_0x4c45d1(0x1bf)][granularity]+_0x4c45d1(0xee)+(htfSignalResult[_0x4c45d1(0xaa)]||_0x4c45d1(0xf2))+'\x20('+(htfSignalResult[_0x4c45d1(0x1a2)]||_0x4c45d1(0x9b))+')'),updateStatus(_0x330cea,!![]),typeof pushSignalNotification===_0x4c45d1(0xef)&&pushSignalNotification(_0x330cea),isInitialSignalPushed=!![],lastSignalType=signalResult[_0x4c45d1(0xaa)],lastSignalStrength=signalResult['strength'],lastHtfSignalType=htfSignalResult?htfSignalResult[_0x4c45d1(0xaa)]:null,lastHtfSignalStrength=htfSignalResult?htfSignalResult[_0x4c45d1(0x1a2)]:null;}}const _0xcf704=document[_0x4c45d1(0xf5)](_0x4c45d1(0x1d9));_0xcf704&&(_0xcf704[_0x4c45d1(0x1b9)]=!initialState[_0x4c45d1(0x1f4)]||initialState[_0x4c45d1(0x1f4)][_0x4c45d1(0x16f)]===0x0);if(globalCandles['length']>0x0){let _0x357193=_0x4c45d1(0x168)+allCandles[_0x4c45d1(0x16f)]+_0x4c45d1(0x95)+newSymbol+'\x20('+granularity+')',_0x58b05c=withHtf&&higherTimeframeCandles['length']>0x0?_0x357193+(_0x4c45d1(0x196)+allHtfCandles[_0x4c45d1(0x16f)]+_0x4c45d1(0x78)+_0x1c0a71[_0x4c45d1(0x1bf)][granularity]+'\x20(HTF\x20limit:\x20'+_0x1322f2+')'):_0x357193;updateStatus(_0x58b05c,!![]);}return{'success':!![],'signalResult':signalResult,'htfSignalResult':htfSignalResult,'allCandles':allCandles,'allHtfCandles':allHtfCandles,'latestCandle':latestCandle,'htfLatestCandle':htfLatestCandle};}catch(_0x29f67f){if(_0x29f67f[_0x4c45d1(0x1c2)][_0x4c45d1(0xe7)]('429'))return console[_0x4c45d1(0x1b4)](_0x4c45d1(0xd8)),await new Promise(_0x5b0fb5=>setTimeout(_0x5b0fb5,0xea60)),isFetchingOHLCV=![],pendingOhlcvCalls=0x0,{'success':![]};if(_0x29f67f[_0x4c45d1(0x121)]===_0x4c45d1(0xde))return{'success':![]};globalCandles=[],higherTimeframeCandles=[],latestCandle=null,htfLatestCandle=null,allCandles=[],allHtfCandles=[],refreshTable(globalCandles),updateStatus('Error:\x20'+_0x29f67f[_0x4c45d1(0x1c2)],![]),console[_0x4c45d1(0x17f)](_0x4c45d1(0xff),_0x29f67f);const _0x500450=document[_0x4c45d1(0xf5)](_0x4c45d1(0x154));return _0x500450&&(_0x500450['disabled']=!![]),{'success':![]};}finally{isFetchingOHLCV=![],pendingOhlcvCalls=0x0,ohlcvAbortController=null;}}export async function fetchTickerForUI(){const _0x2d1edb=_0x137e0f;if(isFetchingTicker){pendingTickerCalls++;const _0x3e5e6d=document['getElementById'](_0x2d1edb(0x15d))?.[_0x2d1edb(0xa7)]||_0x2d1edb(0x1f8),_0x5beef3=getMaxPendingCalls(_0x3e5e6d);if(pendingTickerCalls>=_0x5beef3){tickerAbortController&&(tickerAbortController['abort'](),tickerAbortController=null);isFetchingTicker=![],pendingTickerCalls=0x0;return;}return;}isFetchingTicker=!![],pendingTickerCalls=0x1,tickerAbortController=new AbortController();try{const _0x2d1344=Date[_0x2d1edb(0x1ab)]();_0x2d1344-lastSecondStartTicker>=SECOND_MS&&(tickerCallCount=0x0,lastSecondStartTicker=_0x2d1344);if(tickerCallCount>=TICKER_CALLS_PER_SECOND){const _0x2e5cac=SECOND_MS-(_0x2d1344-lastSecondStartTicker);return await new Promise(_0x396e40=>setTimeout(_0x396e40,_0x2e5cac+0xa)),isFetchingTicker=![],pendingTickerCalls=0x0,fetchTickerForUI();}tickerCallCount++;const _0x2f441d=document[_0x2d1edb(0xf5)](_0x2d1edb(0x15d))?.[_0x2d1edb(0xa7)]||_0x2d1edb(0x1f8),_0x46ce9c=exchanges[_0x2f441d];if(!_0x46ce9c)throw new Error(_0x2d1edb(0x183)+_0x2f441d);ticker=await _0x46ce9c[_0x2d1edb(0xdc)](newSymbol,{'signal':tickerAbortController[_0x2d1edb(0x1a8)]});const _0x2fb0ac={...ticker};updateTickerUI(_0x2fb0ac);const _0x161ba7=document[_0x2d1edb(0xf5)](_0x2d1edb(0x193));!withLatestCandle&&_0x161ba7?.['checked']&&latestCandle&&ticker&&ticker[_0x2d1edb(0x111)]&&!isNaN(ticker[_0x2d1edb(0x111)])&&ticker[_0x2d1edb(0x111)]>0x0&&(ticker[_0x2d1edb(0x111)]>=ticker['low24h']&&ticker[_0x2d1edb(0x111)]<=ticker['high24h']?(latestCandle[0x4]=Number(ticker[_0x2d1edb(0x111)]),typeof updateLatestCandleClose===_0x2d1edb(0xef)&&updateLatestCandleClose(latestCandle)):console[_0x2d1edb(0x1b4)](_0x2d1edb(0x164)+ticker[_0x2d1edb(0x111)]+'\x20outside\x2024h\x20range\x20(low:\x20'+ticker[_0x2d1edb(0x7b)]+',\x20high:\x20'+ticker[_0x2d1edb(0x1ac)]+')')),withHtf&&htfLatestCandle&&ticker&&ticker[_0x2d1edb(0x111)]&&!isNaN(ticker[_0x2d1edb(0x111)])&&ticker[_0x2d1edb(0x111)]>0x0&&(ticker[_0x2d1edb(0x111)]>=ticker[_0x2d1edb(0x7b)]&&ticker[_0x2d1edb(0x111)]<=ticker['high24h']?htfLatestCandle[0x4]=Number(ticker[_0x2d1edb(0x111)]):console[_0x2d1edb(0x1b4)]('Invalid\x20lastPr\x20for\x20htfLatestCandle:\x20'+ticker[_0x2d1edb(0x111)]+'\x20outside\x2024h\x20range'));}catch(_0x317e51){if(_0x317e51[_0x2d1edb(0x1c2)][_0x2d1edb(0xe7)](_0x2d1edb(0x1c4)))return console[_0x2d1edb(0x1b4)]('MEXC\x20rate\x20limit\x20exceeded,\x20pausing\x20for\x2060s...'),await new Promise(_0x5484da=>setTimeout(_0x5484da,0xea60)),isFetchingTicker=![],pendingTickerCalls=0x0,fetchTickerForUI();if(_0x317e51['name']==='AbortError')return;console[_0x2d1edb(0x17f)](_0x2d1edb(0x14c),_0x317e51),updateStatus('Error\x20fetching\x20ticker:\x20'+_0x317e51[_0x2d1edb(0x1c2)],![]);}finally{isFetchingTicker=![],pendingTickerCalls=0x0,tickerAbortController=null;}}export function startRealTimeUpdates(){const _0x4873a3=_0x137e0f;if(realTimeInterval)clearInterval(realTimeInterval);if(tickerInterval)clearInterval(tickerInterval);ohlcvAbortController&&(ohlcvAbortController[_0x4873a3(0x10f)](),ohlcvAbortController=null);tickerAbortController&&(tickerAbortController[_0x4873a3(0x10f)](),tickerAbortController=null);pendingOhlcvCalls=0x0,pendingTickerCalls=0x0;const _0x3a974c=document[_0x4873a3(0xf5)](_0x4873a3(0x193));if(!_0x3a974c[_0x4873a3(0x145)]){updateStatus(_0x4873a3(0x10a),![]);return;}const _0x302ad1=document[_0x4873a3(0xf5)]('input-symbol'),_0x58be82=document[_0x4873a3(0xf5)](_0x4873a3(0x180)),_0x181833=document[_0x4873a3(0xf5)](_0x4873a3(0x15d))?.[_0x4873a3(0xa7)]||_0x4873a3(0x1f8),_0xd4ea0d=exchanges[_0x181833];if(!_0xd4ea0d){updateStatus(_0x4873a3(0xc1)+_0x181833+_0x4873a3(0x198),![]);return;}if(!_0x302ad1||!_0x302ad1['value'][_0x4873a3(0x102)]()||!_0x302ad1[_0x4873a3(0xa7)]['includes']('/')){updateStatus(_0x4873a3(0x119),![]);return;}granularity=_0x58be82['value'],granularityMs=_0xd4ea0d[_0x4873a3(0x1da)][granularity]||0x36ee80;if(!granularityMs){updateStatus(_0x4873a3(0x186)+granularity+_0x4873a3(0x78)+_0x181833,![]);return;}newSymbol=_0x302ad1[_0x4873a3(0xa7)][_0x4873a3(0x102)](),[baseToken,quoteToken]=newSymbol[_0x4873a3(0xae)]('/'),symbol=newSymbol['replace']('/',''),setApiCallLimits(_0x181833,withHtf);const _0xe7358=_0x181833===_0x4873a3(0x19b)?Math[_0x4873a3(0x1ce)](0x3e8/OHLCV_CALLS_PER_SECOND*1.5,0x96):Math[_0x4873a3(0x1ce)](0x3e8/OHLCV_CALLS_PER_SECOND,0x64),_0x4a4346=document[_0x4873a3(0xf5)](_0x4873a3(0x16c));withLatestCandle=_0x4a4346?.[_0x4873a3(0x145)]||![],isInitialSignalPushed=![],lastSignalType=null,lastSignalStrength=null,lastHtfSignalType=null,lastHtfSignalStrength=null,isBackTest?(tickerInterval=setInterval(fetchTickerForUI,Math[_0x4873a3(0x1ce)](0x3e8/TICKER_CALLS_PER_SECOND,0x64)),fetchTickerForUI(),updateStatus(_0x4873a3(0x135)+newSymbol+_0x4873a3(0xe2),!![])):(realTimeInterval=setInterval(async()=>{const _0x38e3d8=await fetchOHLCV();},_0xe7358),tickerInterval=setInterval(fetchTickerForUI,Math['max'](0x3e8/TICKER_CALLS_PER_SECOND,0x64)),fetchTickerForUI(),updateStatus(_0x4873a3(0x1d2)+newSymbol+'\x20('+granularity+')\x20at\x20'+OHLCV_CALLS_PER_SECOND+_0x4873a3(0x148),!![]));}export function stopRealTimeUpdates(){const _0x37cd26=_0x137e0f;realTimeInterval&&(clearInterval(realTimeInterval),realTimeInterval=null),tickerInterval&&(clearInterval(tickerInterval),tickerInterval=null),ohlcvAbortController&&(ohlcvAbortController[_0x37cd26(0x10f)](),ohlcvAbortController=null),tickerAbortController&&(tickerAbortController['abort'](),tickerAbortController=null),isFetchingOHLCV=![],isFetchingTicker=![],pendingOhlcvCalls=0x0,pendingTickerCalls=0x0,updateStatus(_0x37cd26(0x1ed),!![]);}export function recalculate(){const _0x1c0285=_0x137e0f;if(!isBackTest){updateStatus(_0x1c0285(0x109),![]);return;}try{const _0x502311=document[_0x1c0285(0xf5)](_0x1c0285(0x15d))?.[_0x1c0285(0xa7)]||_0x1c0285(0x1f8);if(initialState['exchangeId']&&_0x502311!==initialState['exchangeId'])throw new Error(_0x1c0285(0x9c)+_0x502311+_0x1c0285(0x18d)+initialState[_0x1c0285(0x1b1)]+_0x1c0285(0x76));const _0x5ac60f=document[_0x1c0285(0xf5)](_0x1c0285(0x155));if(!_0x5ac60f)throw new Error(_0x1c0285(0x1aa));const _0x26acf0=_0x5ac60f['value'][_0x1c0285(0x102)]();if(!_0x26acf0)throw new Error(_0x1c0285(0xb4));if(!_0x26acf0[_0x1c0285(0xe7)]('/'))throw new Error(_0x1c0285(0x1ad));const _0x2d4653=document['getElementById'](_0x1c0285(0x180));if(!_0x2d4653)throw new Error(_0x1c0285(0x14f));const _0x4544f4=_0x2d4653[_0x1c0285(0xa7)];if(!_0x4544f4)throw new Error('Granularity\x20is\x20required');const _0x1b191d=document[_0x1c0285(0xf5)](_0x1c0285(0x116));if(!_0x1b191d)throw new Error(_0x1c0285(0x8b));const _0x4c6f7b=Math[_0x1c0285(0x1a1)](Math['max'](parseInt(_0x1b191d[_0x1c0285(0xa7)])||0xc8,0x1),0x3e8),_0x4b7a24=document[_0x1c0285(0xf5)](_0x1c0285(0x105)),_0x8aca13=_0x4b7a24?parseFloat(_0x4b7a24[_0x1c0285(0xa7)])||0x3e8:0x3e8;if(isNaN(_0x8aca13)||_0x8aca13<=0x0)throw new Error(_0x1c0285(0x13a));const _0x22573a=document[_0x1c0285(0xf5)](_0x1c0285(0x19e)),_0x4f0a1c=_0x22573a?parseFloat(_0x22573a['value'])||0x0:0x0;if(isNaN(_0x4f0a1c)||_0x4f0a1c<0x0)throw new Error('Fee\x20percentage\x20cannot\x20be\x20negative');const _0x4eb5a9=document[_0x1c0285(0xf5)](_0x1c0285(0x94)),_0xaade6=document[_0x1c0285(0xf5)]('input-end-time');let _0x1c2671,_0x2f185a;if(_0x4eb5a9&&_0x4eb5a9[_0x1c0285(0xa7)]&&_0xaade6&&_0xaade6[_0x1c0285(0xa7)]){_0x1c2671=new Date(_0x4eb5a9['value'])[_0x1c0285(0x166)](),_0x2f185a=new Date(_0xaade6[_0x1c0285(0xa7)])[_0x1c0285(0x166)]();if(isNaN(_0x1c2671)||isNaN(_0x2f185a))throw new Error('Invalid\x20time\x20input');if(_0x1c2671>=_0x2f185a)throw new Error(_0x1c0285(0xce));}if(!validateWeights()||!validatePercentageInputs()||!validateLookback())return;if(!initialState[_0x1c0285(0x1f4)]||initialState[_0x1c0285(0x1f4)][_0x1c0285(0x16f)]===0x0)throw new Error(_0x1c0285(0x12f));let _0x40e2a3=initialState[_0x1c0285(0x1f4)];_0x1c2671&&_0x2f185a&&(_0x40e2a3=initialState[_0x1c0285(0x1f4)]['filter'](_0xe9c34a=>{let _0x2a0e4e=Number(_0xe9c34a[0x0]);return _0x2a0e4e>=_0x1c2671&&_0x2a0e4e<=_0x2f185a;}));_0x40e2a3=_0x40e2a3[_0x1c0285(0xb2)](-_0x4c6f7b);if(_0x40e2a3[_0x1c0285(0x16f)]===0x0)throw new Error(_0x1c0285(0xd7));const _0x4462cd=_0x26acf0[_0x1c0285(0xae)]('/'),_0x116c21=_0x4462cd[0x0],_0x37dfd1=_0x4462cd[0x1],_0x1571f1=_0x26acf0[_0x1c0285(0xf0)]('/',''),_0x3b59ed=getIndicatorParams(),_0x1d2958=document['getElementById'](_0x1c0285(0x9e))?.[_0x1c0285(0x145)];let _0xce7bd0;_0x1d2958?_0xce7bd0=generateSmcTradingSignal(mapCandlesToChartFormat(_0x40e2a3)):_0xce7bd0=generateTradingSignal(mapCandlesToChartFormat(_0x40e2a3));let _0x343c9d=null,_0x2777b7=initialState[_0x1c0285(0x13d)]||[];withHtf&&_0x2777b7[_0x1c0285(0x16f)]>0x0&&(_0x1c2671&&_0x2f185a&&(_0x2777b7=initialState['allHtfCandles']['filter'](_0x57e42c=>{let _0x32057d=Number(_0x57e42c[0x0]);return _0x32057d>=_0x1c2671&&_0x32057d<=_0x2f185a;})),_0x2777b7=_0x2777b7[_0x1c0285(0xb2)](-(initialState['htfLimit']||0x3c)),_0x2777b7[_0x1c0285(0x16f)]===0x0?console[_0x1c0285(0x1b4)](_0x1c0285(0x85)):_0x1d2958?_0x343c9d=generateSmcTradingSignal(mapCandlesToChartFormat(_0x2777b7)):_0x343c9d=generateTradingSignal(mapCandlesToChartFormat(_0x2777b7)));signalMarkerIndex=_0x40e2a3['length']-0x1,htfSignalMarkerIndex=_0x2777b7['length']>0x0?_0x2777b7['length']-0x1:-0x1;if(signalMarkerIndex<0x0||_0x40e2a3[_0x1c0285(0x16f)]<0x2)signalMarkerIndex=_0x40e2a3[_0x1c0285(0x16f)]-0x1;if(htfSignalMarkerIndex<0x0&&_0x2777b7[_0x1c0285(0x16f)]>=0x2)htfSignalMarkerIndex=_0x2777b7[_0x1c0285(0x16f)]-0x1;recentState={'newSymbol':_0x26acf0,'symbol':_0x1571f1,'baseToken':_0x116c21,'quoteToken':_0x37dfd1,'granularity':_0x4544f4,'limit':_0x4c6f7b,'htfLimit':initialState[_0x1c0285(0xf7)]||0x3c,'startTime':_0x1c2671,'endTime':_0x2f185a,'tradeSize':_0x8aca13,'feePercent':_0x4f0a1c,'candleTypes':_0x3b59ed[_0x1c0285(0x1dc)],'candlePatterns':_0x3b59ed[_0x1c0285(0xed)],'chartPatterns':_0x3b59ed['chartPatterns'],'indicatorParams':_0x3b59ed[_0x1c0285(0xba)]||{},'weightParams':_0x3b59ed['weightParams'],'priceLevelParams':_0x3b59ed[_0x1c0285(0xa4)],'candlePatternSettings':_0x3b59ed[_0x1c0285(0x1f3)],'allCandles':_0x40e2a3,'allHtfCandles':_0x2777b7,'signalResult':_0xce7bd0,'htfSignalResult':_0x343c9d,'useSMCOnly':_0x1d2958,'withHtf':withHtf,'withLatestCandle':withLatestCandle,'signalMarkerIndex':signalMarkerIndex,'htfSignalMarkerIndex':htfSignalMarkerIndex},updateWithSignal(_0xce7bd0,_0x40e2a3,_0x2777b7),updateChartWithSignal(_0xce7bd0,mapCandlesToChartFormat(_0x40e2a3),null,document[_0x1c0285(0xf5)]('real-time-updates')?.[_0x1c0285(0x145)],withHtf?mapCandlesToChartFormat(_0x2777b7):[],null,_0x343c9d),updateStatus('Recalculation\x20successful\x20for\x20'+_0x26acf0+'\x20('+_0x4544f4+_0x1c0285(0x194)+_0x502311,!![]);const _0x5d5377=document[_0x1c0285(0xf5)](_0x1c0285(0x8c));_0x5d5377&&(_0x5d5377[_0x1c0285(0x1b9)]=![]);}catch(_0xffeb7e){updateStatus(_0x1c0285(0x13e)+_0xffeb7e[_0x1c0285(0x1c2)],![]),console[_0x1c0285(0x17f)]('Recalculate\x20error:',_0xffeb7e);}}export function restoreInitialAnalysis(){const _0x4616b1=_0x137e0f;try{if(!initialState||!initialState['allCandles']||initialState[_0x4616b1(0x1f4)]['length']===0x0)throw new Error(_0x4616b1(0xd9));initialState[_0x4616b1(0x1b1)]&&(document[_0x4616b1(0xf5)](_0x4616b1(0x15d))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x1b1)]);document[_0x4616b1(0xf5)](_0x4616b1(0x155))[_0x4616b1(0xa7)]=initialState['newSymbol']||'',document[_0x4616b1(0xf5)](_0x4616b1(0x180))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x77)]||'',document[_0x4616b1(0xf5)]('input-limit')['value']=initialState[_0x4616b1(0x1f6)]||0xc8,document['getElementById'](_0x4616b1(0x107))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xf7)]||0x3c,document['getElementById'](_0x4616b1(0x19e))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x161)]||'',document[_0x4616b1(0xf5)](_0x4616b1(0x105))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x122)]||'',document[_0x4616b1(0xf5)]('input-start-time')[_0x4616b1(0xa7)]=initialState['startTime']?new Date(initialState[_0x4616b1(0x157)])[_0x4616b1(0x17e)]()[_0x4616b1(0xb2)](0x0,0x10):'',document['getElementById'](_0x4616b1(0x199))[_0x4616b1(0xa7)]=initialState['endTime']?new Date(initialState[_0x4616b1(0x159)])[_0x4616b1(0x17e)]()[_0x4616b1(0xb2)](0x0,0x10):'',document['getElementById'](_0x4616b1(0xe5))[_0x4616b1(0x145)]=!!initialState[_0x4616b1(0x1a9)],document[_0x4616b1(0xf5)](_0x4616b1(0x16c))['checked']=!!initialState['latestCandle'];initialState[_0x4616b1(0x12a)]&&(document[_0x4616b1(0xf5)]('candle-weight')['value']=initialState[_0x4616b1(0x12a)][_0x4616b1(0x80)]||0x14,document[_0x4616b1(0xf5)](_0x4616b1(0x18c))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x12a)][_0x4616b1(0x1cc)]||0x23,document[_0x4616b1(0xf5)](_0x4616b1(0xac))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x12a)]['indicator']||0x2d);initialState[_0x4616b1(0xa4)]&&(document[_0x4616b1(0xf5)](_0x4616b1(0x17c))['value']=initialState[_0x4616b1(0xa4)][_0x4616b1(0xc2)]||0x14,document[_0x4616b1(0xf5)](_0x4616b1(0x177))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x7a)]||0x4,document['getElementById'](_0x4616b1(0x1d4))[_0x4616b1(0x145)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x173)]||![],document['getElementById']('stop-loss-very-weak-buy')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x10c)]||0x1,document[_0x4616b1(0xf5)](_0x4616b1(0x174))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x18f)]||0x1,document[_0x4616b1(0xf5)]('stop-loss-moderate-buy')['value']=initialState[_0x4616b1(0xa4)][_0x4616b1(0xdf)]||0x1,document[_0x4616b1(0xf5)]('stop-loss-strong-buy')[_0x4616b1(0xa7)]=initialState['priceLevelParams'][_0x4616b1(0x1e2)]||0x1,document[_0x4616b1(0xf5)]('stop-loss-very-weak-sell')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x1eb)]||0.5,document[_0x4616b1(0xf5)]('stop-loss-weak-sell')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x15c)]||0.5,document[_0x4616b1(0xf5)](_0x4616b1(0xa6))[_0x4616b1(0xa7)]=initialState['priceLevelParams']['stopLossModerateSell']||0.5,document[_0x4616b1(0xf5)](_0x4616b1(0xd1))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0xbd)]||0.5,document[_0x4616b1(0xf5)]('stop-loss-multiplier-buy')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0xf8)]||1.5,document[_0x4616b1(0xf5)](_0x4616b1(0x197))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)]['stopLossMultiplierSell']||0x1,document[_0x4616b1(0xf5)]('take-profit-very-weak-buy')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)]['takeProfitVeryWeakBuy']||0.3,document['getElementById']('take-profit-weak-buy')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x156)]||0.4,document[_0x4616b1(0xf5)](_0x4616b1(0xb6))['value']=initialState[_0x4616b1(0xa4)][_0x4616b1(0x115)]||0.5,document[_0x4616b1(0xf5)](_0x4616b1(0x14d))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0xb9)]||0.6,document['getElementById'](_0x4616b1(0xb8))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0xdd)]||0.3,document['getElementById'](_0x4616b1(0x88))['value']=initialState[_0x4616b1(0xa4)][_0x4616b1(0x1d3)]||0.2,document[_0x4616b1(0xf5)](_0x4616b1(0x126))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x13c)]||0.1,document[_0x4616b1(0xf5)]('take-profit-strong-sell')[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xa4)][_0x4616b1(0x1df)]||0x0,document['getElementById'](_0x4616b1(0xd5))[_0x4616b1(0xa7)]=initialState['priceLevelParams'][_0x4616b1(0x187)]||0x2,document['getElementById'](_0x4616b1(0x9d))[_0x4616b1(0xa7)]=initialState['priceLevelParams'][_0x4616b1(0x8a)]||0x1);if(initialState[_0x4616b1(0xed)])for(const _0x22b080 in initialState[_0x4616b1(0xed)]){const _0x1a5878=document[_0x4616b1(0xf5)](_0x4616b1(0x13b)+_0x22b080+_0x4616b1(0xe8));_0x1a5878&&(_0x1a5878[_0x4616b1(0xa7)]=initialState[_0x4616b1(0xed)][_0x22b080]||'');}if(initialState[_0x4616b1(0x150)])for(const _0x4c5e1f in initialState[_0x4616b1(0x150)]){const _0x382761=document['getElementById']('chart-pattern-'+_0x4c5e1f+_0x4616b1(0xe8));_0x382761&&(_0x382761[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x150)][_0x4c5e1f]||'');}if(initialState[_0x4616b1(0xba)])for(const _0x24a6bf in initialState['indicatorParams']){const _0x961ee9=initialState['indicatorParams'][_0x24a6bf];document['getElementById'](_0x24a6bf+_0x4616b1(0x90))[_0x4616b1(0x145)]=_0x961ee9[_0x4616b1(0xe6)]||![];if(_0x961ee9[_0x4616b1(0x98)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x1e0))[_0x4616b1(0xa7)]=_0x961ee9['period'];if(_0x961ee9['short'])document['getElementById'](_0x24a6bf+'-short')[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0xc9)];if(_0x961ee9['long'])document[_0x4616b1(0xf5)](_0x24a6bf+'-long')[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0xfa)];if(_0x961ee9['fast'])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x19d))['value']=_0x961ee9[_0x4616b1(0x158)];if(_0x961ee9['slow'])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0xf3))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x1f5)];if(_0x961ee9[_0x4616b1(0x1a8)])document[_0x4616b1(0xf5)](_0x24a6bf+'-signal')[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x1a8)];if(_0x961ee9['deviation'])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x7f))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0xb3)];if(_0x961ee9['k'])document['getElementById'](_0x24a6bf+'-k')[_0x4616b1(0xa7)]=_0x961ee9['k'];if(_0x961ee9['d'])document[_0x4616b1(0xf5)](_0x24a6bf+'-d')[_0x4616b1(0xa7)]=_0x961ee9['d'];if(_0x961ee9[_0x4616b1(0x8f)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x11d))[_0x4616b1(0xa7)]=_0x961ee9['smooth'];if(_0x961ee9[_0x4616b1(0x176)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x162))['value']=_0x961ee9['tenkan'];if(_0x961ee9[_0x4616b1(0x129)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x9a))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x129)];if(_0x961ee9[_0x4616b1(0x114)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0xaf))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x114)];if(_0x961ee9['displacement'])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0xab))[_0x4616b1(0xa7)]=_0x961ee9['displacement'];if(_0x961ee9[_0x4616b1(0x169)])document['getElementById'](_0x24a6bf+_0x4616b1(0xad))['value']=_0x961ee9[_0x4616b1(0x169)];if(_0x961ee9[_0x4616b1(0x1ce)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x1db))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x1ce)];if(_0x961ee9[_0x4616b1(0xd6)])document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x1e7))['value']=_0x961ee9[_0x4616b1(0xd6)];document[_0x4616b1(0xf5)](_0x24a6bf+_0x4616b1(0x10d))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x8e)],document['getElementById'](_0x24a6bf+_0x4616b1(0x112))[_0x4616b1(0xa7)]=_0x961ee9[_0x4616b1(0x101)];}initialState[_0x4616b1(0x1dc)]&&(document[_0x4616b1(0xf5)](_0x4616b1(0x1b7))[_0x4616b1(0x145)]=initialState['candleTypes']['ha']||![]);initialState[_0x4616b1(0x1f3)]&&(document[_0x4616b1(0xf5)](_0x4616b1(0x1cd))['value']=initialState[_0x4616b1(0x1f3)]['maxPatterns']||0x3,document[_0x4616b1(0xf5)](_0x4616b1(0x7c))[_0x4616b1(0xa7)]=initialState[_0x4616b1(0x1f3)][_0x4616b1(0x97)]||0x0);allCandles=initialState['allCandles']||[],allHtfCandles=initialState['allHtfCandles']||[],globalCandles=initialState[_0x4616b1(0x92)]||[],higherTimeframeCandles=initialState['higherTimeframeCandles']||[],latestCandle=initialState['latestCandle']||null,htfLatestCandle=initialState['htfLatestCandle']||null,withHtf=!!initialState['higherTimeframe'],withLatestCandle=!!initialState[_0x4616b1(0x1a0)],refreshTable(initialState[_0x4616b1(0x1f4)]),recalculate(),validateWeights(),validatePercentageInputs(),validateLookback(),validateHtfLimit(),validateCandlePatternSettings(),updateStatus(_0x4616b1(0x82)+(initialState['newSymbol']||_0x4616b1(0x12d))+'\x20('+(initialState[_0x4616b1(0x77)]||_0x4616b1(0x89))+_0x4616b1(0x132)+(initialState[_0x4616b1(0x1b1)]||_0x4616b1(0x1b3)),!![]);const _0x591293=document[_0x4616b1(0xf5)](_0x4616b1(0x1d9)),_0x7aa3e7=document['getElementById']('restore-recent');_0x591293&&(_0x591293[_0x4616b1(0x1b9)]=!initialState['allCandles']||initialState[_0x4616b1(0x1f4)][_0x4616b1(0x16f)]===0x0||!recentState[_0x4616b1(0xba)]),_0x7aa3e7&&(_0x7aa3e7[_0x4616b1(0x1b9)]=!recentState||!recentState[_0x4616b1(0x1f4)]||recentState[_0x4616b1(0x1f4)][_0x4616b1(0x16f)]===0x0);}catch(_0x53999){updateStatus(_0x4616b1(0x191)+_0x53999['message'],![]),console['error'](_0x4616b1(0x11f),_0x53999);const _0x19cbc2=document[_0x4616b1(0xf5)](_0x4616b1(0x1d9)),_0x3d98d5=document[_0x4616b1(0xf5)](_0x4616b1(0x8c));if(_0x19cbc2)_0x19cbc2[_0x4616b1(0x1b9)]=!![];if(_0x3d98d5)_0x3d98d5[_0x4616b1(0x1b9)]=!![];}}export function restoreRecentAnalysis(){const _0x311838=_0x137e0f;try{if(!recentState||!recentState['allCandles']||recentState['allCandles'][_0x311838(0x16f)]===0x0)throw new Error(_0x311838(0x1a3));!recentState['indicatorParams']&&(console[_0x311838(0x1b4)](_0x311838(0x1ca)),recentState['indicatorParams']={});if(initialState[_0x311838(0x1b1)]){const _0x1be376=document[_0x311838(0xf5)](_0x311838(0x15d));_0x1be376&&(_0x1be376['value']=initialState['exchangeId']);}const _0x2afa40=document[_0x311838(0xf5)](_0x311838(0x155));if(_0x2afa40)_0x2afa40[_0x311838(0xa7)]=recentState['newSymbol']||'';const _0x16fbbb=document[_0x311838(0xf5)]('input-granularity');if(_0x16fbbb)_0x16fbbb[_0x311838(0xa7)]=recentState[_0x311838(0x77)]||'';const _0x33bcdd=document[_0x311838(0xf5)](_0x311838(0x116));if(_0x33bcdd)_0x33bcdd[_0x311838(0xa7)]=recentState[_0x311838(0x1f6)]||0xc8;const _0x3a3c5f=document['getElementById'](_0x311838(0x107));if(_0x3a3c5f)_0x3a3c5f[_0x311838(0xa7)]=recentState[_0x311838(0xf7)]||0x3c;const _0x4a9d3f=document['getElementById'](_0x311838(0x19e));if(_0x4a9d3f)_0x4a9d3f[_0x311838(0xa7)]=recentState[_0x311838(0x161)]||'';const _0x349e00=document['getElementById']('input-trade-size');if(_0x349e00)_0x349e00[_0x311838(0xa7)]=recentState[_0x311838(0x122)]||'';const _0x32369f=document[_0x311838(0xf5)](_0x311838(0x94));_0x32369f&&(_0x32369f[_0x311838(0xa7)]=recentState[_0x311838(0x157)]?new Date(recentState['startTime'])[_0x311838(0x17e)]()[_0x311838(0xb2)](0x0,0x10):'');const _0x24a226=document[_0x311838(0xf5)](_0x311838(0x199));_0x24a226&&(_0x24a226[_0x311838(0xa7)]=recentState[_0x311838(0x159)]?new Date(recentState[_0x311838(0x159)])[_0x311838(0x17e)]()[_0x311838(0xb2)](0x0,0x10):'');const _0x5787f5=document[_0x311838(0xf5)](_0x311838(0xe5));if(_0x5787f5)_0x5787f5[_0x311838(0x145)]=recentState[_0x311838(0x185)]||![];const _0x32901b=document['getElementById'](_0x311838(0x16c));if(_0x32901b)_0x32901b['checked']=recentState[_0x311838(0x1f2)]||![];signalMarkerIndex=recentState[_0x311838(0x16a)],htfSignalMarkerIndex=recentState['htfSignalMarkerIndex'];const _0x5ec7cc=document[_0x311838(0xf5)](_0x311838(0x9e));if(_0x5ec7cc)_0x5ec7cc[_0x311838(0x145)]=recentState['useSMCOnly']||![];if(recentState[_0x311838(0x12a)]){const _0xd971df=document['getElementById']('candle-weight');if(_0xd971df)_0xd971df[_0x311838(0xa7)]=recentState[_0x311838(0x12a)]['candle']||0x14;const _0x14a90f=document['getElementById'](_0x311838(0x18c));if(_0x14a90f)_0x14a90f[_0x311838(0xa7)]=recentState['weightParams'][_0x311838(0x1cc)]||0x23;const _0x5ad677=document[_0x311838(0xf5)](_0x311838(0xac));if(_0x5ad677)_0x5ad677[_0x311838(0xa7)]=recentState[_0x311838(0x12a)][_0x311838(0x104)]||0x2d;}if(recentState[_0x311838(0xa4)]){const _0x25a8ca=document[_0x311838(0xf5)](_0x311838(0x17c));if(_0x25a8ca)_0x25a8ca[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0xc2)]||0x14;const _0x38f008=document['getElementById'](_0x311838(0x177));if(_0x38f008)_0x38f008['value']=recentState['priceLevelParams']['trendStrengthCandles']||0x4;const _0x2d6fcf=document['getElementById']('only-recent-checkbox');if(_0x2d6fcf)_0x2d6fcf[_0x311838(0x145)]=recentState[_0x311838(0xa4)][_0x311838(0x173)]||![];const _0x5d54e4=document[_0x311838(0xf5)](_0x311838(0x15f));if(_0x5d54e4)_0x5d54e4['value']=recentState[_0x311838(0xa4)][_0x311838(0x10c)]||0x1;const _0x2f8c8=document[_0x311838(0xf5)]('stop-loss-weak-buy');if(_0x2f8c8)_0x2f8c8['value']=recentState['priceLevelParams'][_0x311838(0x18f)]||0x1;const _0x364aa3=document[_0x311838(0xf5)](_0x311838(0x19f));if(_0x364aa3)_0x364aa3['value']=recentState[_0x311838(0xa4)][_0x311838(0xdf)]||0x1;const _0x10983d=document[_0x311838(0xf5)](_0x311838(0x96));if(_0x10983d)_0x10983d[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0x1e2)]||0x1;const _0x5e2b8d=document['getElementById'](_0x311838(0x131));if(_0x5e2b8d)_0x5e2b8d[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0x1eb)]||0.5;const _0x287a19=document['getElementById'](_0x311838(0x137));if(_0x287a19)_0x287a19[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0x15c)]||0.5;const _0x1756aa=document['getElementById'](_0x311838(0xa6));if(_0x1756aa)_0x1756aa[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0x100)]||0.5;const _0xc725d6=document[_0x311838(0xf5)](_0x311838(0xd1));if(_0xc725d6)_0xc725d6[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0xbd)]||0.5;const _0x398adf=document[_0x311838(0xf5)](_0x311838(0x1c0));if(_0x398adf)_0x398adf['value']=recentState[_0x311838(0xa4)][_0x311838(0xf8)]||1.5;const _0x376bb1=document[_0x311838(0xf5)]('stop-loss-multiplier-sell');if(_0x376bb1)_0x376bb1[_0x311838(0xa7)]=recentState['priceLevelParams'][_0x311838(0x10e)]||0x1;const _0x4b78e4=document[_0x311838(0xf5)]('take-profit-very-weak-buy');if(_0x4b78e4)_0x4b78e4[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0x16b)]||0.3;const _0x1b9236=document['getElementById'](_0x311838(0x99));if(_0x1b9236)_0x1b9236['value']=recentState[_0x311838(0xa4)][_0x311838(0x156)]||0.4;const _0x2f9edf=document[_0x311838(0xf5)]('take-profit-moderate-buy');if(_0x2f9edf)_0x2f9edf[_0x311838(0xa7)]=recentState[_0x311838(0xa4)][_0x311838(0x115)]||0.5;const _0x433d9b=document[_0x311838(0xf5)](_0x311838(0x14d));if(_0x433d9b)_0x433d9b[_0x311838(0xa7)]=recentState['priceLevelParams'][_0x311838(0xb9)]||0.6;const _0x5daeb2=document[_0x311838(0xf5)](_0x311838(0xb8));if(_0x5daeb2)_0x5daeb2['value']=recentState['priceLevelParams'][_0x311838(0xdd)]||0.3;const _0x3d56ef=document['getElementById'](_0x311838(0x88));if(_0x3d56ef)_0x3d56ef[_0x311838(0xa7)]=recentState['priceLevelParams'][_0x311838(0x1d3)]||0.2;const _0x585c08=document['getElementById'](_0x311838(0x126));if(_0x585c08)_0x585c08[_0x311838(0xa7)]=recentState[_0x311838(0xa4)]['takeProfitModerateSell']||0.1;const _0x344ce5=document[_0x311838(0xf5)](_0x311838(0x149));if(_0x344ce5)_0x344ce5[_0x311838(0xa7)]=recentState['priceLevelParams']['takeProfitStrongSell']||0x0;const _0x36e561=document[_0x311838(0xf5)]('take-profit-multiplier-buy');if(_0x36e561)_0x36e561[_0x311838(0xa7)]=recentState['priceLevelParams'][_0x311838(0x187)]||0x2;const _0x4ca2c7=document[_0x311838(0xf5)](_0x311838(0x9d));if(_0x4ca2c7)_0x4ca2c7[_0x311838(0xa7)]=recentState['priceLevelParams']['takeProfitMultiplierSell']||0x1;}if(recentState[_0x311838(0xed)])for(const _0x40ae33 in recentState[_0x311838(0xed)]){const _0xf598e0=document[_0x311838(0xf5)](_0x311838(0x13b)+_0x40ae33+_0x311838(0xe8));_0xf598e0?_0xf598e0[_0x311838(0xa7)]=recentState[_0x311838(0xed)][_0x40ae33]||'':console[_0x311838(0x1b4)](_0x311838(0xca)+_0x40ae33+_0x311838(0xe8));}if(recentState[_0x311838(0x150)])for(const _0x506973 in recentState['chartPatterns']){const _0x482c5b=document[_0x311838(0xf5)](_0x311838(0x1c9)+_0x506973+_0x311838(0xe8));_0x482c5b?_0x482c5b[_0x311838(0xa7)]=recentState[_0x311838(0x150)][_0x506973]||'':console[_0x311838(0x1b4)](_0x311838(0xfb)+_0x506973+_0x311838(0xe8));}if(recentState[_0x311838(0xba)]&&typeof recentState[_0x311838(0xba)]===_0x311838(0x184))for(const _0xe23882 in recentState[_0x311838(0xba)]){const _0xac89e7=recentState['indicatorParams'][_0xe23882];if(_0xac89e7&&typeof _0xac89e7===_0x311838(0x184)){const _0x70c041=document[_0x311838(0xf5)](_0xe23882+'-enabled');_0x70c041?_0x70c041[_0x311838(0x145)]=_0xac89e7[_0x311838(0xe6)]||![]:console['warn'](_0x311838(0x1d5)+_0xe23882+_0x311838(0x90));if(_0xac89e7[_0x311838(0x98)]){const _0x303ef7=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x1e0));if(_0x303ef7)_0x303ef7[_0x311838(0xa7)]=_0xac89e7[_0x311838(0x98)];}if(_0xac89e7[_0x311838(0xc9)]){const _0x57ea38=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x106));if(_0x57ea38)_0x57ea38[_0x311838(0xa7)]=_0xac89e7[_0x311838(0xc9)];}if(_0xac89e7['long']){const _0x424aca=document[_0x311838(0xf5)](_0xe23882+'-long');if(_0x424aca)_0x424aca['value']=_0xac89e7[_0x311838(0xfa)];}if(_0xac89e7[_0x311838(0x158)]){const _0x4fd5e3=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x19d));if(_0x4fd5e3)_0x4fd5e3['value']=_0xac89e7[_0x311838(0x158)];}if(_0xac89e7[_0x311838(0x1f5)]){const _0x3c35c1=document[_0x311838(0xf5)](_0xe23882+_0x311838(0xf3));if(_0x3c35c1)_0x3c35c1['value']=_0xac89e7['slow'];}if(_0xac89e7['signal']){const _0x1595b5=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x1ec));if(_0x1595b5)_0x1595b5['value']=_0xac89e7[_0x311838(0x1a8)];}if(_0xac89e7[_0x311838(0xb3)]){const _0x545809=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x7f));if(_0x545809)_0x545809[_0x311838(0xa7)]=_0xac89e7[_0x311838(0xb3)];}if(_0xac89e7['k']){const _0x20548a=document['getElementById'](_0xe23882+'-k');if(_0x20548a)_0x20548a['value']=_0xac89e7['k'];}if(_0xac89e7['d']){const _0x91fb61=document[_0x311838(0xf5)](_0xe23882+'-d');if(_0x91fb61)_0x91fb61[_0x311838(0xa7)]=_0xac89e7['d'];}if(_0xac89e7[_0x311838(0x8f)]){const _0x1c0755=document['getElementById'](_0xe23882+'-smooth');if(_0x1c0755)_0x1c0755[_0x311838(0xa7)]=_0xac89e7[_0x311838(0x8f)];}if(_0xac89e7[_0x311838(0x176)]){const _0x1a8884=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x162));if(_0x1a8884)_0x1a8884[_0x311838(0xa7)]=_0xac89e7[_0x311838(0x176)];}if(_0xac89e7[_0x311838(0x129)]){const _0x4c395e=document[_0x311838(0xf5)](_0xe23882+_0x311838(0x9a));if(_0x4c395e)_0x4c395e[_0x311838(0xa7)]=_0xac89e7[_0x311838(0x129)];}if(_0xac89e7['senkou']){const _0x27a84c=document[_0x311838(0xf5)](_0xe23882+_0x311838(0xaf));if(_0x27a84c)_0x27a84c['value']=_0xac89e7[_0x311838(0x114)];}if(_0xac89e7['displacement']){const _0x47f066=document[_0x311838(0xf5)](_0xe23882+'-displacement');if(_0x47f066)_0x47f066[_0x311838(0xa7)]=_0xac89e7[_0x311838(0x1ee)];}if(_0xac89e7[_0x311838(0x169)]){const _0x18e27f=document['getElementById'](_0xe23882+_0x311838(0xad));if(_0x18e27f)_0x18e27f[_0x311838(0xa7)]=_0xac89e7[_0x311838(0x169)];}if(_0xac89e7[_0x311838(0x1ce)]){const _0x3b505d=document[_0x311838(0xf5)](_0xe23882+'-max');if(_0x3b505d)_0x3b505d['value']=_0xac89e7[_0x311838(0x1ce)];}if(_0xac89e7[_0x311838(0xd6)]){const _0x6d7c1=document[_0x311838(0xf5)](_0xe23882+'-multiplier');if(_0x6d7c1)_0x6d7c1[_0x311838(0xa7)]=_0xac89e7[_0x311838(0xd6)];}const _0x5d751f=document['getElementById'](_0xe23882+_0x311838(0x10d));if(_0x5d751f)_0x5d751f['value']=_0xac89e7['weightStrong']||'';const _0x3aa343=document['getElementById'](_0xe23882+'-weight-weak');if(_0x3aa343)_0x3aa343['value']=_0xac89e7[_0x311838(0x101)]||'';}}if(recentState[_0x311838(0x1dc)]){const _0x40dcf1=document['getElementById'](_0x311838(0x1b7));if(_0x40dcf1)_0x40dcf1[_0x311838(0x145)]=recentState['candleTypes']['ha']||![];}if(recentState[_0x311838(0x1f3)]){const _0x484ca0=document[_0x311838(0xf5)](_0x311838(0x1cd));if(_0x484ca0)_0x484ca0[_0x311838(0xa7)]=recentState[_0x311838(0x1f3)]['maxPatterns']||0x3;const _0x29c701=document[_0x311838(0xf5)]('candle-pattern-min-index');if(_0x29c701)_0x29c701['value']=recentState[_0x311838(0x1f3)]['minCandleIndex']||0x0;}allCandles=recentState[_0x311838(0x1f4)]||[],allHtfCandles=recentState['allHtfCandles']||[],globalCandles=recentState[_0x311838(0x1f4)]?recentState[_0x311838(0x1f4)][_0x311838(0x144)](_0x12cf23=>_0x12cf23[0x0]<Math['floor'](Date['now']()/granularityMs)*granularityMs):[],higherTimeframeCandles=recentState[_0x311838(0x13d)]?recentState[_0x311838(0x13d)][_0x311838(0x144)](_0x535456=>_0x535456[0x0]<Math[_0x311838(0x113)](Date[_0x311838(0x1ab)]()/higherGranularityMs)*higherGranularityMs):[],latestCandle=recentState[_0x311838(0x1f4)]&&recentState[_0x311838(0x1f4)][_0x311838(0x16f)]>0x0?recentState[_0x311838(0x1f4)][_0x311838(0x1b5)](_0x5c642f=>_0x5c642f[0x0]>=Math[_0x311838(0x113)](Date['now']()/granularityMs)*granularityMs):null,htfLatestCandle=recentState[_0x311838(0x13d)]&&recentState[_0x311838(0x13d)]['length']>0x0?recentState[_0x311838(0x13d)][_0x311838(0x1b5)](_0xa2e013=>_0xa2e013[0x0]>=Math[_0x311838(0x113)](Date[_0x311838(0x1ab)]()/higherGranularityMs)*higherGranularityMs):null,withHtf=recentState[_0x311838(0x185)]||![],withLatestCandle=recentState['withLatestCandle']||![],refreshTable(recentState[_0x311838(0x1f4)]),updateChartWithSignal(recentState[_0x311838(0x13f)]||{},mapCandlesToChartFormat(recentState[_0x311838(0x1f4)]),null,document['getElementById']('real-time-updates')?.[_0x311838(0x145)],withHtf?mapCandlesToChartFormat(recentState[_0x311838(0x13d)]):[],null,recentState['htfSignalResult']||{}),updateWithSignal(recentState[_0x311838(0x13f)]||{},recentState[_0x311838(0x1f4)],recentState[_0x311838(0x13d)]),validateWeights(),validatePercentageInputs(),validateLookback(),validateHtfLimit(),validateCandlePatternSettings();const _0x248245=document[_0x311838(0xf5)]('restore-initial'),_0x274c78=document[_0x311838(0xf5)]('restore-recent');_0x248245&&(_0x248245[_0x311838(0x1b9)]=!initialState[_0x311838(0x1f4)]||initialState[_0x311838(0x1f4)][_0x311838(0x16f)]===0x0),_0x274c78&&(_0x274c78['disabled']=!recentState[_0x311838(0x1f4)]||recentState[_0x311838(0x1f4)][_0x311838(0x16f)]===0x0),updateStatus(_0x311838(0xf6)+(recentState[_0x311838(0x195)]||_0x311838(0x12d))+'\x20('+(recentState[_0x311838(0x77)]||_0x311838(0x89))+_0x311838(0x132)+(initialState[_0x311838(0x1b1)]||_0x311838(0x1b3)),!![]);}catch(_0x5625a2){updateStatus('Error\x20restoring\x20recent\x20analysis:\x20'+_0x5625a2[_0x311838(0x1c2)],![]),console[_0x311838(0x17f)]('Restore\x20recent\x20analysis\x20error:',_0x5625a2);const _0x119a42=document['getElementById']('restore-initial'),_0x26308c=document[_0x311838(0xf5)](_0x311838(0x8c));if(_0x119a42)_0x119a42['disabled']=!![];if(_0x26308c)_0x26308c[_0x311838(0x1b9)]=!![];}}export async function initializeData(){const _0x202e4b=_0x137e0f,_0x17b20b=document[_0x202e4b(0xf5)]('input-symbol'),_0x5bd136=document[_0x202e4b(0xf5)]('input-granularity'),_0x495219=document[_0x202e4b(0xf5)](_0x202e4b(0x193)),_0x55f05c=document[_0x202e4b(0xf5)](_0x202e4b(0x15d)),_0x589850=document[_0x202e4b(0xf5)]('symbol-search'),_0x52116f=document[_0x202e4b(0xf5)](_0x202e4b(0xb1)),_0x4c851e=document[_0x202e4b(0xf5)]('collapse-results'),_0x8de2f8=document[_0x202e4b(0xf5)]('granularity-buttons'),_0xb7d4c2=document[_0x202e4b(0xf5)](_0x202e4b(0x16c)),_0x1ee489=document['getElementById'](_0x202e4b(0xe5)),_0x2ec0b6=document['getElementById']('back-test-checkbox'),_0x1fb570=document[_0x202e4b(0xf5)]('input-htf-limit'),_0x2a16af=document[_0x202e4b(0xf5)](_0x202e4b(0xcb)),_0x5c589f=document['getElementById']('request');if(!_0x17b20b||!_0x5bd136||!_0x495219||!_0x55f05c||!_0x589850||!_0x52116f||!_0x4c851e||!_0x8de2f8||!_0xb7d4c2||!_0x1ee489||!_0x2ec0b6||!_0x1fb570||!_0x2a16af||!_0x5c589f){console[_0x202e4b(0x1b4)](_0x202e4b(0x11a));return;}try{let _0x2e35f5=await cacheAllSymbols();}catch(_0x475f76){updateStatus(_0x202e4b(0xcd),![]);}let _0x3758b3=exchanges[_0x202e4b(0x19b)],_0x4fe060=_0x55f05c[_0x202e4b(0xa7)]||_0x202e4b(0x19b);const _0x4103ca=async _0x3b4f79=>{const _0x2572d5=_0x202e4b;_0x4fe060=_0x3b4f79,_0x3758b3=exchanges[_0x4fe060];if(!_0x3758b3){console[_0x2572d5(0x17f)]('Exchange\x20'+_0x4fe060+_0x2572d5(0xbe));return;}try{await populateSymbolDropdown(_0x3758b3,_0x4fe060),await populateGranularityDropdown(_0x3758b3);}catch(_0x553892){updateStatus('Failed\x20to\x20populate\x20dropdowns\x20for\x20'+_0x4fe060,![]);}granularityMs=_0x3758b3[_0x2572d5(0x1da)][_0x5bd136[_0x2572d5(0xa7)]]||0x36ee80,higherGranularityMs=_0x3758b3[_0x2572d5(0x1da)][_0x3758b3[_0x2572d5(0x1bf)][_0x5bd136['value']]]||0xdbba00,_0x17b20b['value'][_0x2572d5(0x102)]()[_0x2572d5(0xe7)]('/')&&(newSymbol=_0x17b20b[_0x2572d5(0xa7)][_0x2572d5(0x102)](),[baseToken,quoteToken]=newSymbol[_0x2572d5(0xae)]('/'),!isBackTest?fetchOHLCV():recalculate());};_0x1fb570[_0x202e4b(0xa7)]=initialState[_0x202e4b(0xf7)]||0x3c,_0x1fb570[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{const _0x418507=_0x202e4b,_0x26820a=parseInt(_0x1fb570[_0x418507(0xa7)])||0x3c;(isNaN(_0x26820a)||_0x26820a<0x1||_0x26820a>0x3e8)&&(updateStatus(_0x418507(0x189),![]),_0x1fb570[_0x418507(0xa7)]=0x3c),newSymbol[_0x418507(0xe7)]('/')&&([baseToken,quoteToken]=newSymbol['split']('/'),!isBackTest?fetchOHLCV():recalculate());}),_0x2ec0b6['addEventListener'](_0x202e4b(0x19a),()=>{const _0x496af1=_0x202e4b;isBackTest=_0x2ec0b6[_0x496af1(0x145)],_0x2a16af[_0x496af1(0x1b9)]=!isBackTest||!initialState['allCandles']||initialState['allCandles'][_0x496af1(0x16f)]===0x0,_0x5c589f[_0x496af1(0x1b9)]=isBackTest;_0x495219['checked']&&(stopRealTimeUpdates(),startRealTimeUpdates());updateStatus(isBackTest?'Backtest\x20mode\x20enabled:\x20Use\x20cached\x20data\x20with\x20recalculate\x20button':_0x496af1(0xdb),!![]);if(isBackTest&&newSymbol[_0x496af1(0xe7)]('/'))recalculate();else!isBackTest&&newSymbol[_0x496af1(0xe7)]('/')&&fetchOHLCV();}),_0x2a16af[_0x202e4b(0x1b9)]=!isBackTest||!initialState[_0x202e4b(0x1f4)]||initialState[_0x202e4b(0x1f4)][_0x202e4b(0x16f)]===0x0,_0x5c589f['disabled']=isBackTest;const _0x44a48d=()=>{const _0x45bdc9=_0x202e4b;_0x52116f['innerHTML']='';const _0xe5b2c3=_0x589850[_0x45bdc9(0xa7)]['trim']()[_0x45bdc9(0xc6)](),_0x515d91=(symbolsCache[_0x4fe060][_0x45bdc9(0x16f)]>0x0?symbolsCache[_0x4fe060]:popularSymbols[_0x4fe060]||[])[_0x45bdc9(0x127)](),_0x287c51=_0xe5b2c3?_0x515d91[_0x45bdc9(0x144)](_0x3d08d9=>_0x3d08d9[_0x45bdc9(0xc6)]()[_0x45bdc9(0xe7)](_0xe5b2c3)):_0x515d91;if(_0x287c51['length']===0x0&&_0xe5b2c3){const _0x4995fb=document['createElement']('li');_0x4995fb[_0x45bdc9(0x1f1)]=_0x45bdc9(0x1be),_0x4995fb[_0x45bdc9(0x192)]='symbol-result-message\x20no-results',_0x52116f[_0x45bdc9(0xcf)](_0x4995fb);}else{if(_0x287c51[_0x45bdc9(0x16f)]>0x0){const _0x240eb9=document[_0x45bdc9(0x1e5)]('li');_0x240eb9[_0x45bdc9(0x1f1)]=_0xe5b2c3?_0x45bdc9(0x14a)+_0x287c51['length']+'\x20'+(_0x287c51[_0x45bdc9(0x16f)]>0x1?_0x45bdc9(0x182):_0x45bdc9(0xe4)):_0x45bdc9(0xb5)+_0x515d91['length']+')',_0x240eb9[_0x45bdc9(0x192)]=_0x45bdc9(0x17b),_0x52116f[_0x45bdc9(0xcf)](_0x240eb9);}_0x287c51[_0x45bdc9(0x141)](_0x5aa166=>{const _0x1db674=_0x45bdc9,_0x263b24=document[_0x1db674(0x1e5)]('li');_0x263b24[_0x1db674(0x1f1)]=_0x5aa166,_0x263b24[_0x1db674(0x192)]=_0x1db674(0xbb),_0x52116f[_0x1db674(0xcf)](_0x263b24),_0x263b24['addEventListener'](_0x1db674(0x12b),()=>{const _0x13700a=_0x1db674;_0x17b20b[_0x13700a(0xa7)]=_0x5aa166,newSymbol=_0x5aa166,[baseToken,quoteToken]=newSymbol['split']('/'),_0x52116f['innerHTML']='',_0x589850['value']='',!isBackTest?fetchOHLCV():recalculate();});});}};_0x589850['addEventListener'](_0x202e4b(0xc4),_0x44a48d),_0x4c851e[_0x202e4b(0x7d)](_0x202e4b(0x12b),()=>{const _0x2526f3=_0x202e4b;_0x52116f[_0x2526f3(0x1b8)]='',_0x589850[_0x2526f3(0xa7)]='';}),_0x8de2f8['addEventListener'](_0x202e4b(0x12b),_0x512609=>{const _0x57be7a=_0x202e4b;if(_0x512609[_0x57be7a(0x87)][_0x57be7a(0x181)]['contains'](_0x57be7a(0x1ba))){const _0x45f964=_0x512609[_0x57be7a(0x87)][_0x57be7a(0x160)][_0x57be7a(0xc7)];_0x5bd136[_0x57be7a(0xa7)]=_0x45f964,granularityMs=_0x3758b3[_0x57be7a(0x1da)][_0x45f964]||0x36ee80,higherGranularityMs=_0x3758b3['granularityMap'][_0x3758b3['nextHtfGranularityMap'][_0x45f964]]||0xdbba00,document[_0x57be7a(0x1f7)](_0x57be7a(0x142))[_0x57be7a(0x141)](_0x4c7fb7=>_0x4c7fb7[_0x57be7a(0x181)]['remove'](_0x57be7a(0x9f))),_0x512609['target'][_0x57be7a(0x181)][_0x57be7a(0xd0)](_0x57be7a(0x9f)),newSymbol[_0x57be7a(0xe7)]('/')&&([baseToken,quoteToken]=newSymbol[_0x57be7a(0xae)]('/'),!isBackTest?fetchOHLCV():recalculate());}}),await _0x4103ca(_0x4fe060),_0x55f05c[_0x202e4b(0x7d)]('change',async()=>{const _0x289d75=_0x202e4b;localStorage['setItem']('granularityExpanded',_0x8de2f8['dataset'][_0x289d75(0x1c1)]),await _0x4103ca(_0x55f05c['value']),_0x589850[_0x289d75(0xa7)]='',_0x52116f[_0x289d75(0x1b8)]='';}),_0x17b20b[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{const _0x58ab38=_0x202e4b;newSymbol=_0x17b20b[_0x58ab38(0xa7)][_0x58ab38(0x102)](),newSymbol[_0x58ab38(0xe7)]('/')&&([baseToken,quoteToken]=newSymbol[_0x58ab38(0xae)]('/'),!isBackTest?fetchOHLCV():recalculate());}),_0x5bd136['addEventListener'](_0x202e4b(0x19a),()=>{const _0xe4dfdb=_0x202e4b;granularityMs=_0x3758b3[_0xe4dfdb(0x1da)][_0x5bd136[_0xe4dfdb(0xa7)]]||0x36ee80,higherGranularityMs=_0x3758b3[_0xe4dfdb(0x1da)][_0x3758b3['nextHtfGranularityMap'][_0x5bd136['value']]]||0xdbba00,document[_0xe4dfdb(0x1f7)](_0xe4dfdb(0x142))[_0xe4dfdb(0x141)](_0x1173c1=>_0x1173c1[_0xe4dfdb(0x181)][_0xe4dfdb(0xd3)](_0xe4dfdb(0x9f)));const _0x370fa8=document[_0xe4dfdb(0x15e)](_0xe4dfdb(0x91)+_0x5bd136[_0xe4dfdb(0xa7)]+'\x22]');_0x370fa8&&_0x370fa8[_0xe4dfdb(0x181)][_0xe4dfdb(0xd0)](_0xe4dfdb(0x9f));const _0x30d3c7=['1m','15m','1h','4h','1d'][_0xe4dfdb(0x144)](_0xaa3537=>Object['keys'](_0x3758b3[_0xe4dfdb(0x81)])['includes'](_0xaa3537));if(!_0x30d3c7['includes'](_0x5bd136[_0xe4dfdb(0xa7)])&&_0x8de2f8['dataset'][_0xe4dfdb(0x1c1)]!=='true'){const _0x542f36=[..._0x30d3c7,_0x5bd136[_0xe4dfdb(0xa7)]][_0xe4dfdb(0x144)](_0x3e2540=>Object[_0xe4dfdb(0xeb)](_0x3758b3[_0xe4dfdb(0x81)])['includes'](_0x3e2540));populateGranularityDropdown(_0x3758b3,_0x542f36);}!isBackTest?fetchOHLCV():recalculate();}),_0x495219[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{_0x495219['checked']?startRealTimeUpdates():stopRealTimeUpdates();}),_0xb7d4c2[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{const _0x15da3f=_0x202e4b;withLatestCandle=_0xb7d4c2['checked'];if(_0x495219[_0x15da3f(0x145)])stopRealTimeUpdates(),startRealTimeUpdates();else!isBackTest?fetchOHLCV():recalculate();}),_0x1ee489[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{const _0x830a69=_0x202e4b;withHtf=_0x1ee489[_0x830a69(0x145)];if(_0x495219[_0x830a69(0x145)])stopRealTimeUpdates(),startRealTimeUpdates();else!isBackTest?fetchOHLCV():recalculate();});const _0x23122a=document[_0x202e4b(0xf5)](_0x202e4b(0x1d4)),_0x568f3b=document[_0x202e4b(0xf5)](_0x202e4b(0x118));_0x23122a&&_0x23122a[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{const _0x5e408d=_0x202e4b;onlyRecent=_0x23122a[_0x5e408d(0x145)];if(onlyRecent){_0x568f3b['checked']=![],onlyStrong=![],updateStatus('Using\x20Only-Recent\x20reversal\x20for\x20Support\x20and\x20Resistance',!![]);let _0x5cc138=document[_0x5e408d(0xf5)](_0x5e408d(0x17c)),_0x4b5093=Math[_0x5e408d(0x1a1)](Number(_0x5cc138[_0x5e408d(0xa7)])||0x19,0xa);_0x4b5093>0xa&&(console[_0x5e408d(0x17f)](_0x5e408d(0xbf)),updateStatus(_0x5e408d(0x1cf),![]),_0x5cc138[_0x5e408d(0xa7)]=0xa,_0x5cc138[_0x5e408d(0xa7)]===0xa&&updateStatus(_0x5e408d(0x188),!![]));}else updateStatus(_0x5e408d(0x1d0),!![]);});_0x568f3b&&_0x568f3b[_0x202e4b(0x7d)](_0x202e4b(0x19a),()=>{const _0x140c8c=_0x202e4b;onlyStrong=_0x568f3b[_0x140c8c(0x145)],onlyStrong?(_0x23122a[_0x140c8c(0x145)]=![],onlyRecent=![],updateStatus(_0x140c8c(0x16d),!![])):updateStatus(_0x140c8c(0x86),!![]);});const _0x3f8200=document['getElementById'](_0x202e4b(0xc0));_0x3f8200&&_0x3f8200[_0x202e4b(0x7d)](_0x202e4b(0x12b),async()=>{const _0x4ddb5c=_0x202e4b,_0x56f25d=await initializePushNotifications();_0x56f25d?(_0x3f8200[_0x4ddb5c(0x1b9)]=!![],updateStatus('Push\x20notifications\x20enabled',!![])):updateStatus('Failed\x20to\x20enable\x20push\x20notifications',![]);}),_0x495219[_0x202e4b(0x145)]&&startRealTimeUpdates();}export async function populateGranularityDropdown(_0x4fa628,_0x479920=null){const _0x36c974=_0x137e0f,_0x18f35d=Object[_0x36c974(0xeb)](_0x4fa628[_0x36c974(0x81)]),_0x4c7137=document[_0x36c974(0xf5)](_0x36c974(0x180)),_0x19ac62=document['getElementById'](_0x36c974(0xda)),_0x471a78=document[_0x36c974(0xf5)]('more-timeframes'),_0x45947c=document['getElementById']('collapse-timeframes');if(!_0x4c7137||!_0x19ac62||!_0x471a78||!_0x45947c){console['warn']('Granularity\x20input,\x20buttons\x20container,\x20or\x20buttons\x20not\x20found');return;}const _0x311c5a=['1m','15m','1h','4h','1d'][_0x36c974(0x144)](_0x566349=>_0x18f35d[_0x36c974(0xe7)](_0x566349)),_0x1138f7=_0x18f35d[_0x36c974(0x127)]((_0x29c6ab,_0x383dc3)=>{const _0x460360=_0x36c974,_0x5b52c2=_0x5db85a=>_0x4fa628[_0x460360(0x1da)][_0x5db85a]||0x36ee80;return _0x5b52c2(_0x29c6ab)-_0x5b52c2(_0x383dc3);}),_0x2eca54=(_0x32bb70,_0x33f6b3=![])=>{const _0xc4bc98=_0x36c974;_0x19ac62[_0xc4bc98(0x1b8)]='',_0x32bb70[_0xc4bc98(0x141)](_0xcb083=>{const _0xd43ce4=_0xc4bc98,_0xe1db7=document[_0xd43ce4(0x1e5)](_0xd43ce4(0x143));_0xe1db7[_0xd43ce4(0x1f1)]=_0xcb083,_0xe1db7[_0xd43ce4(0x192)]=_0xd43ce4(0x1ba),_0xe1db7['dataset']['timeframe']=_0xcb083,_0xcb083===_0x4c7137[_0xd43ce4(0xa7)]&&_0xe1db7[_0xd43ce4(0x181)][_0xd43ce4(0xd0)](_0xd43ce4(0x9f)),_0xe1db7[_0xd43ce4(0x7d)]('click',()=>{const _0x5afc31=_0xd43ce4;_0x4c7137['value']=_0xcb083,granularityMs=_0x4fa628[_0x5afc31(0x1da)][_0xcb083]||0x36ee80,higherGranularityMs=_0x4fa628[_0x5afc31(0x1da)][_0x4fa628['nextHtfGranularityMap'][_0xcb083]]||0xdbba00,document[_0x5afc31(0x1f7)](_0x5afc31(0x142))[_0x5afc31(0x141)](_0x5111a1=>_0x5111a1[_0x5afc31(0x181)][_0x5afc31(0xd3)](_0x5afc31(0x9f))),_0xe1db7[_0x5afc31(0x181)]['add'](_0x5afc31(0x9f)),newSymbol['includes']('/')&&([baseToken,quoteToken]=newSymbol[_0x5afc31(0xae)]('/'),fetchOHLCV());}),_0x19ac62[_0xd43ce4(0xcf)](_0xe1db7);}),_0x471a78['style']['display']=_0x33f6b3?_0xc4bc98(0x15b):_0x1138f7[_0xc4bc98(0x16f)]>_0x311c5a['length']?_0xc4bc98(0x14e):_0xc4bc98(0x15b),_0x45947c[_0xc4bc98(0xd4)][_0xc4bc98(0xd2)]=_0x33f6b3?_0xc4bc98(0x14e):_0xc4bc98(0x15b),_0x19ac62['appendChild'](_0x471a78),_0x19ac62[_0xc4bc98(0xcf)](_0x45947c);},_0x48cf3a=localStorage['getItem'](_0x36c974(0x1bb))==='true';_0x19ac62[_0x36c974(0x160)]['expanded']=_0x48cf3a['toString']();const _0x48e501=_0x479920||(_0x48cf3a?_0x1138f7:_0x311c5a[_0x36c974(0xe7)](_0x4c7137[_0x36c974(0xa7)])?_0x311c5a:[..._0x311c5a,_0x4c7137[_0x36c974(0xa7)]]['filter'](_0x49ff90=>_0x18f35d['includes'](_0x49ff90)));_0x2eca54(_0x48e501,_0x48cf3a),_0x471a78[_0x36c974(0x167)](_0x471a78),_0x45947c['replaceWith'](_0x45947c),_0x471a78[_0x36c974(0x1ea)]=()=>{const _0x43e829=_0x36c974;_0x2eca54(_0x1138f7,!![]),_0x19ac62[_0x43e829(0x160)][_0x43e829(0x1c1)]=_0x43e829(0x152),localStorage[_0x43e829(0x171)](_0x43e829(0x1bb),_0x43e829(0x152));},_0x45947c[_0x36c974(0x1ea)]=()=>{const _0x8fc2de=_0x36c974,_0x470ed6=_0x311c5a[_0x8fc2de(0xe7)](_0x4c7137[_0x8fc2de(0xa7)])?_0x311c5a:[..._0x311c5a,_0x4c7137['value']][_0x8fc2de(0x144)](_0x25de9e=>_0x18f35d[_0x8fc2de(0xe7)](_0x25de9e));_0x2eca54(_0x470ed6,![]),_0x19ac62['dataset'][_0x8fc2de(0x1c1)]=_0x8fc2de(0x147),localStorage[_0x8fc2de(0x171)](_0x8fc2de(0x1bb),_0x8fc2de(0x147));},_0x4c7137[_0x36c974(0x1b8)]='',_0x18f35d['forEach'](_0x4fc4af=>{const _0x189cfa=_0x36c974,_0x52c512=document[_0x189cfa(0x1e5)](_0x189cfa(0x128));_0x52c512[_0x189cfa(0xa7)]=_0x4fc4af,_0x52c512['textContent']=_0x4fc4af,_0x4c7137[_0x189cfa(0xcf)](_0x52c512);});if(!_0x479920){const _0x2c964e=granularity;_0x4c7137[_0x36c974(0xa7)]=_0x18f35d[_0x36c974(0xe7)](_0x2c964e)?_0x2c964e:_0x18f35d['includes']('1h')?'1h':_0x18f35d[0x0];}const _0x4cc76b=document[_0x36c974(0x15e)](_0x36c974(0x91)+_0x4c7137[_0x36c974(0xa7)]+'\x22]');document[_0x36c974(0x1f7)](_0x36c974(0x142))['forEach'](_0x3ac0f8=>_0x3ac0f8[_0x36c974(0x181)][_0x36c974(0xd3)](_0x36c974(0x9f))),_0x4cc76b&&_0x4cc76b[_0x36c974(0x181)][_0x36c974(0xd0)]('active');}export async function populateSymbolDropdown(_0x129106,_0x353ac6){const _0x25cdfb=_0x137e0f,_0x224ccf=document[_0x25cdfb(0xf5)](_0x25cdfb(0x155));if(!_0x224ccf){console['warn']('Symbol\x20input\x20not\x20found');return;}_0x224ccf[_0x25cdfb(0x1b8)]=_0x25cdfb(0x1af);const _0x52b4ad=(symbolsCache[_0x353ac6][_0x25cdfb(0x16f)]>0x0?symbolsCache[_0x353ac6]:popularSymbols[_0x353ac6]||[_0x25cdfb(0x1e1),_0x25cdfb(0x153)])[_0x25cdfb(0x127)]();_0x52b4ad[_0x25cdfb(0x141)](_0x3c65df=>{const _0x4f0cc7=_0x25cdfb,_0x2d3342=document['createElement'](_0x4f0cc7(0x128));_0x2d3342[_0x4f0cc7(0xa7)]=_0x3c65df,_0x2d3342[_0x4f0cc7(0x1f1)]=_0x3c65df,_0x224ccf[_0x4f0cc7(0xcf)](_0x2d3342);}),_0x224ccf[_0x25cdfb(0xa7)]=_0x52b4ad[_0x25cdfb(0xe7)](newSymbol)?newSymbol:_0x52b4ad['includes'](_0x25cdfb(0x79))?_0x25cdfb(0x79):_0x52b4ad[_0x25cdfb(0xe7)]('BTC/USDT')?'BTC/USDT':_0x52b4ad[0x0];}export async function fetchOHLCVForSignals(_0x54ab5c,_0x594567,_0x2cd3b8,_0x2bbd4c,_0xeb03fa){const _0x2f3c8f=_0x137e0f;try{const _0x42743a=this,_0x2583f3=await _0x42743a['fetchOHLCV'](_0x54ab5c,_0x594567,_0x2cd3b8,_0xeb03fa);return _0x2583f3;}catch(_0xf13976){console['error']('Error\x20fetching\x20OHLCV\x20for\x20'+_0x54ab5c+_0x2f3c8f(0xf9)+_0x594567+':',_0xf13976);throw _0xf13976;}}export function resetAnalysis(){const _0x3b1268=_0x137e0f;try{stopRealTimeUpdates(),allCandles=[],allHtfCandles=[],globalCandles=[],higherTimeframeCandles=[],latestCandle=null,htfLatestCandle=null,signalResult={},htfSignalResult={},signalMarkerIndex=-0x1,htfSignalMarkerIndex=-0x1,ticker=null,initialState={'symbol':null,'newSymbol':null,'baseVolumeTable':null,'quoteVolumeTable':null,'granularity':null,'higherTimeframe':null,'limit':null,'htfLimit':0x3c,'startTime':null,'endTime':null,'tradeSize':null,'feePercent':null,'indicators':null,'candlePatterns':null,'chartPatterns':null,'weightParams':null,'priceLevelParams':null,'candles':null,'higherTimeframeCandles':null,'signalResult':null,'htfSignalResult':null},recentState=null,resetInputs(),refreshTable([]),updateChartWithSignal({},[],null,![],[],null,{});const _0x2c5c44=document[_0x3b1268(0xf5)](_0x3b1268(0xcb)),_0x2776b8=document[_0x3b1268(0xf5)]('restore-initial'),_0x4dd2dc=document['getElementById'](_0x3b1268(0x8c));if(_0x2c5c44)_0x2c5c44[_0x3b1268(0x1b9)]=!![];if(_0x2776b8)_0x2776b8[_0x3b1268(0x1b9)]=!![];if(_0x4dd2dc)_0x4dd2dc[_0x3b1268(0x1b9)]=!![];updateStatus(_0x3b1268(0x83),!![]);}catch(_0x431d4e){updateStatus(_0x3b1268(0xcc)+_0x431d4e[_0x3b1268(0x1c2)],![]),console[_0x3b1268(0x17f)]('Reset\x20analysis\x20error:',_0x431d4e);}}